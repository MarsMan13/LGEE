{"ast":null,"code":"var _jsxFileName = \"/home/islab/LGEE/project/frontend/src/views/HLSVideo.js\";\nimport { useRef, useEffect, useCallback } from 'react';\nimport Button from '@enact/sandstone/Button';\nimport Hls from 'hls.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HLSVideo = props => {\n  const videoRef = useRef(null);\n  const hlsRef = useRef(null);\n  useEffect(() => {\n    if (Hls.isSupported()) {\n      const video = videoRef.current;\n      const hls = new Hls();\n      hls.loadSource(props.src);\n      hls.attachMedia(video);\n\n      // triggered when the loaded manifest is parsed.s\n      hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {\n        console.log('>>>>>>>>>>>> manifest loaded, found ' + data.levels.length + ' quality level');\n        video.play();\n      });\n      hlsRef.current = hls;\n\n      // triggered when a new segment (fragment) is loaded.\n      // eslint-disable-next-line\n      hls.on(Hls.Events.FRAG_LOADED, function (event, data) {\n        console.log('=========================================================');\n        console.log('>>>>>>>>>>>> Estimated bandwidth:', hls.bandwidthEstimate + ' bps');\n        const index = hls.currentLevel;\n        const level = hls.levels[index];\n        console.log('>>>>>>>>>>>> currentLevel:', hls.currentLevel);\n        console.log('>>>>>>>>>>>> levels:', hls.levels);\n        console.log('>>>>>>>>>>>> loadLevel:', hls.loadLevel);\n        if (level) {\n          if (level.height) {\n            console.log('>>>>>>>>>>>> Selected resolution:', level.height + 'p');\n          }\n          if (level.bitrate) {\n            console.log('>>>>>>>>>>>> Selected bandwidth:', Math.round(level.bitrate / 1000) + ' kbps');\n            if (index !== -1 && index >= 0) {\n              console.log('>>>>>>>>>>>> Selected bandwidth:', hls.levels[index].attrs.BANDWIDTH + ' bps');\n            }\n          }\n        }\n      });\n    }\n  }, [props.src]);\n  const handleZeroClick = useCallback(() => {\n    console.log('Button clicked!');\n    hlsRef.current.currentLevel = 0;\n  }, []);\n  const handleAutoClick = useCallback(() => {\n    console.log('Button clicked!');\n    hlsRef.current.currentLevel = -1; // Auto resolution switching\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        className: \"btn\",\n        onClick: handleZeroClick,\n        children: \"Level 0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"btn\",\n        onClick: handleAutoClick,\n        children: \"Auto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: \"list\",\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: \"playspeed\",\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: \"speakercenter\",\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: \"miniplayer\",\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: \"subtitle\",\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      controls: true,\n      height: 720\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\nexport default HLSVideo;","map":{"version":3,"names":["useRef","useEffect","useCallback","Button","Hls","jsxDEV","_jsxDEV","Fragment","_Fragment","HLSVideo","props","videoRef","hlsRef","isSupported","video","current","hls","loadSource","src","attachMedia","on","Events","MANIFEST_PARSED","event","data","console","log","levels","length","play","FRAG_LOADED","bandwidthEstimate","index","currentLevel","level","loadLevel","height","bitrate","Math","round","attrs","BANDWIDTH","handleZeroClick","handleAutoClick","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","icon","size","ref","controls"],"sources":["/home/islab/LGEE/project/frontend/src/views/HLSVideo.js"],"sourcesContent":["import {useRef, useEffect, useCallback} from 'react';\nimport Button from '@enact/sandstone/Button'\nimport Hls from 'hls.js';\n\nconst HLSVideo = (props) => {\n\tconst videoRef = useRef(null);\n\tconst hlsRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tif (Hls.isSupported()) {\n\t\t\tconst video = videoRef.current;\n\t\t\tconst hls = new Hls();\n\t\t\thls.loadSource(props.src);\n\t\t\thls.attachMedia(video);\n\n\t\t\t// triggered when the loaded manifest is parsed.s\n\t\t\thls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'>>>>>>>>>>>> manifest loaded, found ' +\n\t\t\t\t\t\tdata.levels.length +\n\t\t\t\t\t\t' quality level'\n\t\t\t\t);\n\t\t\t\tvideo.play();\n\t\t\t});\n\t\t\thlsRef.current = hls;\n\n\t\t\t// triggered when a new segment (fragment) is loaded.\n\t\t\t// eslint-disable-next-line\n\t\t\thls.on(Hls.Events.FRAG_LOADED, function (event, data) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'========================================================='\n\t\t\t\t);\n\t\t\t\tconsole.log(\n\t\t\t\t\t'>>>>>>>>>>>> Estimated bandwidth:',\n\t\t\t\t\thls.bandwidthEstimate + ' bps'\n\t\t\t\t);\n\n\t\t\t\tconst index = hls.currentLevel;\n\t\t\t\tconst level = hls.levels[index];\n\n\t\t\t\tconsole.log('>>>>>>>>>>>> currentLevel:', hls.currentLevel);\n\t\t\t\tconsole.log('>>>>>>>>>>>> levels:', hls.levels);\n\t\t\t\tconsole.log('>>>>>>>>>>>> loadLevel:', hls.loadLevel);\n\n\t\t\t\tif (level) {\n\t\t\t\t\tif (level.height) {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'>>>>>>>>>>>> Selected resolution:',\n\t\t\t\t\t\t\tlevel.height + 'p'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (level.bitrate) {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'>>>>>>>>>>>> Selected bandwidth:',\n\t\t\t\t\t\t\tMath.round(level.bitrate / 1000) + ' kbps'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (index !== -1 && index >= 0) {\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'>>>>>>>>>>>> Selected bandwidth:',\n\t\t\t\t\t\t\t\thls.levels[index].attrs.BANDWIDTH + ' bps'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [props.src]);\n\n\tconst handleZeroClick = useCallback(() => {\n\t\tconsole.log('Button clicked!');\n\t\thlsRef.current.currentLevel = 0;\n\t}, []);\n\n\tconst handleAutoClick = useCallback(() => {\n\t\tconsole.log('Button clicked!');\n\t\thlsRef.current.currentLevel = -1; // Auto resolution switching\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<div>\n\t\t\t\t<Button className=\"btn\" onClick={handleZeroClick}>\n\t\t\t\t\tLevel 0\n\t\t\t\t</Button>\n\t\t\t\t<Button className=\"btn\" onClick={handleAutoClick}>\n\t\t\t\t\tAuto\n\t\t\t\t</Button>\n\t\t\t\t<Button icon=\"list\" size=\"small\" />\n\t\t\t\t<Button icon=\"playspeed\" size=\"small\" />\n\t\t\t\t<Button icon=\"speakercenter\" size=\"small\" />\n\t\t\t\t<Button icon=\"miniplayer\" size=\"small\" />\n\t\t\t\t<Button icon=\"subtitle\" size=\"small\" />\n\t\t\t</div>\n\n\t\t\t<video ref={videoRef} controls height={720} />\n\t\t</>\n\t);\n};\n\nexport default HLSVideo;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}