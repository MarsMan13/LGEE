{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useThemeScroller = exports[\"default\"] = void 0;\nvar _handle = require(\"@enact/core/handle\");\nvar _keymap = require(\"@enact/core/keymap\");\nvar _platform = _interopRequireDefault(require(\"@enact/core/platform\"));\nvar _spotlight = _interopRequireDefault(require(\"@enact/spotlight\"));\nvar _utils = require(\"@enact/spotlight/src/utils\");\nvar _resolution = _interopRequireDefault(require(\"@enact/ui/resolution\"));\nvar _utilDOM = _interopRequireDefault(require(\"@enact/ui/useScroll/utilDOM\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _react = require(\"react\");\nvar _useScroll = require(\"../useScroll\");\nvar _useEvent = require(\"./useEvent\");\nvar _ScrollerModule = _interopRequireDefault(require(\"./Scroller.module.css\"));\nvar _ScrollbarTrackModule = _interopRequireDefault(require(\"../useScroll/ScrollbarTrack.module.css\"));\nvar _excluded = [\"className\", \"children\", \"editable\", \"fadeOut\", \"scrollContainerRef\"],\n  _excluded2 = [\"setNavigableFilter\"];\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nvar isCancel = (0, _keymap.is)('cancel'),\n  isEnter = (0, _keymap.is)('enter'),\n  isBody = function isBody(elem) {\n    return elem.classList.contains(_ScrollerModule[\"default\"].focusableBody);\n  };\nvar getFocusableBodyProps = function getFocusableBodyProps(scrollContainerRef, contentId, isScrollbarVisible) {\n  var spotlightId = scrollContainerRef.current && scrollContainerRef.current.dataset.spotlightId;\n  var setNavigableFilter = function setNavigableFilter(_ref) {\n    var filterTarget = _ref.filterTarget;\n    spotlightId = scrollContainerRef.current && scrollContainerRef.current.dataset.spotlightId;\n    if (spotlightId && filterTarget) {\n      var targetClassName = filterTarget === 'body' ? _ScrollerModule[\"default\"].focusableBody : _ScrollbarTrackModule[\"default\"].thumb;\n      _spotlight[\"default\"].set(spotlightId, {\n        navigableFilter: function navigableFilter(elem) {\n          return typeof elem === 'string' || !elem.classList.contains(targetClassName);\n        }\n      });\n      return true;\n    }\n    return false;\n  };\n  var getNavigableFilterTarget = function getNavigableFilterTarget(ev) {\n    var keyCode = ev.keyCode,\n      target = ev.target,\n      type = ev.type;\n    var filterTarget = null;\n    if (!isScrollbarVisible) {\n      return {\n        filterTarget: filterTarget\n      };\n    }\n    if (type === 'focus') {\n      filterTarget = isBody(target) ? 'thumb' : 'body';\n    } else if (type === 'blur') {\n      filterTarget = 'body';\n    } else if (type === 'keydown') {\n      filterTarget = !_spotlight[\"default\"].getPointerMode() && isEnter(keyCode) && isBody(target) && 'body' || isEnter(keyCode) && !isBody(target) && 'thumb' || isCancel(keyCode) && !isBody(target) && 'thumb' || null;\n    }\n    return {\n      filterTarget: filterTarget\n    };\n  };\n  var consumeEventWithFocus = function consumeEventWithFocus(ev) {\n    var target = ev.target;\n    var nextTarget;\n    if (isBody(target)) {\n      // Enter key on scroll Body.\n      // Scroll thumb get focus.\n      var spottableDescendants = _spotlight[\"default\"].getSpottableDescendants(spotlightId);\n      if (spottableDescendants.length > 0) {\n        // Last spottable descendant(thumb) get focus.\n        nextTarget = spottableDescendants.pop();\n\n        // If there are both thumbs, vertical thumb is the next target\n        var verticalThumb = spottableDescendants.pop();\n        nextTarget = verticalThumb && verticalThumb.classList.contains(_ScrollbarTrackModule[\"default\"].thumb) ? verticalThumb : nextTarget;\n      }\n    } else {\n      // Enter or Cancel key on scroll thumb.\n      // Scroll body get focus.\n      nextTarget = target.closest(\".\".concat(_ScrollerModule[\"default\"].focusableBody));\n    }\n    if (nextTarget) {\n      _spotlight[\"default\"].focus(nextTarget);\n      ev.preventDefault();\n      ev.nativeEvent.stopImmediatePropagation();\n    }\n  };\n  return {\n    'aria-labelledby': contentId,\n    className: _ScrollerModule[\"default\"].focusableBody,\n    onFocus: (0, _handle.handle)((0, _handle.forward)('onFocus'), (0, _handle.adaptEvent)(getNavigableFilterTarget, setNavigableFilter)),\n    onBlur: (0, _handle.handle)(\n    // Focus out to external element.\n    (0, _handle.forward)('onBlur'), (0, _handle.adaptEvent)(getNavigableFilterTarget, setNavigableFilter)),\n    onKeyDown: (0, _handle.handle)((0, _handle.forward)('onKeyDown'), (0, _handle.adaptEvent)(getNavigableFilterTarget, setNavigableFilter), consumeEventWithFocus),\n    setNavigableFilter: setNavigableFilter\n  };\n};\nvar useSpottable = function useSpottable(props, instances) {\n  var scrollContainerRef = instances.scrollContainerRef,\n    scrollContentHandle = instances.scrollContentHandle,\n    scrollContentRef = instances.scrollContentRef;\n\n  // Hooks\n\n  var _useEventKey = (0, _useEvent.useEventKey)(),\n    addGlobalKeyDownEventListener = _useEventKey.addGlobalKeyDownEventListener,\n    removeGlobalKeyDownEventListener = _useEventKey.removeGlobalKeyDownEventListener;\n  var setContainerDisabled = (0, _react.useCallback)(function (bool) {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.dataset.spotlightContainerDisabled = bool;\n      if (bool) {\n        addGlobalKeyDownEventListener(function () {\n          setContainerDisabled(false);\n        });\n      } else {\n        removeGlobalKeyDownEventListener();\n      }\n    }\n  }, [addGlobalKeyDownEventListener, removeGlobalKeyDownEventListener, scrollContainerRef]);\n  (0, _react.useEffect)(function () {\n    return function () {\n      return setContainerDisabled(false);\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  (0, _react.useEffect)(function () {\n    var onUpdate = props.onUpdate;\n    if (onUpdate) {\n      onUpdate();\n    }\n  });\n\n  // Functions\n\n  /**\n   * Returns the first spotlight container between `node` and the scroller\n   *\n   * @param {Node} node A DOM node\n   *\n   * @returns {Node|Null} Spotlight container for `node`\n   * @private\n   */\n  function getSpotlightContainerForNode(node) {\n    do {\n      if (node.dataset.spotlightId && node.dataset.spotlightContainer && !node.dataset.expandableContainer) {\n        return node;\n      }\n    } while ((node = node.parentNode) && node !== scrollContentRef.current);\n  }\n\n  /**\n   * Calculates the \"focus bounds\" of a node. If the node is within a spotlight container, that\n   * container is scrolled into view rather than just the element.\n   *\n   * @param {Node} node Focused node\n   *\n   * @returns {Object} Bounds as returned by `getBoundingClientRect`\n   * @private\n   */\n  function getFocusedItemBounds(node) {\n    node = getSpotlightContainerForNode(node) || node;\n    return node.getBoundingClientRect();\n  }\n\n  /**\n   * Calculates the new `scrollTop`.\n   *\n   * @param {Node} item Focused item node\n   *\n   * @returns {Number} Calculated `scrollTop`\n   * @private\n   */\n  function calculateScrollTop(item) {\n    var threshold = _resolution[\"default\"].scale(48);\n    var roundToStart = function roundToStart(sb, st) {\n      // round to start\n      if (st < threshold) return 0;\n      return st;\n    };\n    var roundToEnd = function roundToEnd(sb, st, sh) {\n      // round to end\n      if (sh - (st + sb.height) < threshold) return sh - sb.height;\n      return st + _resolution[\"default\"].scale(_useScroll.affordanceSize);\n    };\n    // adding threshold into these determinations ensures that items that are within that are\n    // near the bounds of the scroller cause the edge to be scrolled into view even when the\n    // item itself is in view (e.g. due to margins)\n    var isItemBeforeView = function isItemBeforeView(ib, sb, d) {\n      return ib.top + d - threshold < sb.top;\n    };\n    var isItemAfterView = function isItemAfterView(ib, sb, d) {\n      return ib.top + d + ib.height + threshold > sb.top + sb.height;\n    };\n    var canItemFit = function canItemFit(ib, sb) {\n      return ib.height <= sb.height;\n    };\n    var calcItemAtStart = function calcItemAtStart(ib, sb, st, d) {\n      return ib.top + st + d - sb.top;\n    };\n    var calcItemAtEnd = function calcItemAtEnd(ib, sb, st, d) {\n      return ib.top + ib.height + st + d - (sb.top + sb.height);\n    };\n    var calcItemInView = function calcItemInView(ib, sb, st, sh, d) {\n      if (isItemBeforeView(ib, sb, d)) {\n        return roundToStart(sb, calcItemAtStart(ib, sb, st, d));\n      } else if (isItemAfterView(ib, sb, d)) {\n        return roundToEnd(sb, calcItemAtEnd(ib, sb, st, d), sh);\n      }\n      return st;\n    };\n    var container = getSpotlightContainerForNode(item);\n    var scrollerBounds = scrollContentRef.current.getBoundingClientRect();\n    var _scrollContentRef$cur = scrollContentRef.current,\n      scrollHeight = _scrollContentRef$cur.scrollHeight,\n      scrollTop = _scrollContentRef$cur.scrollTop;\n    var scrollTopDelta = 0;\n    var adjustScrollTop = function adjustScrollTop(v) {\n      scrollTopDelta = scrollTop - v;\n      scrollTop = v;\n    };\n    if (container) {\n      var containerBounds = container.getBoundingClientRect();\n\n      // if the entire container fits in the scroller, scroll it into view\n      if (canItemFit(containerBounds, scrollerBounds)) {\n        return calcItemInView(containerBounds, scrollerBounds, scrollTop, scrollHeight, scrollTopDelta);\n      }\n\n      // if the container doesn't fit, adjust the scroll top ...\n      if (containerBounds.top > scrollerBounds.top) {\n        // ... to the top of the container if the top is below the top of the scroller\n        adjustScrollTop(calcItemAtStart(containerBounds, scrollerBounds, scrollTop, scrollTopDelta));\n      }\n      // removing support for \"snap to bottom\" for 2.2.8\n      // } else if (containerBounds.top + containerBounds.height < scrollerBounds.top + scrollerBounds.height) {\n      // \t// ... to the bottom of the container if the bottom is above the bottom of the\n      // \t// scroller\n      // \tadjustScrollTop(calcItemAtEnd(containerBounds, scrollerBounds, scrollTop, scrollTopDelta));\n      // }\n\n      // N.B. if the container covers the scrollable area (its top is above the top of the\n      // scroller and its bottom is below the bottom of the scroller), we need not adjust the\n      // scroller to ensure the container is wholly in view.\n    }\n\n    var itemBounds = item.getBoundingClientRect();\n    return calcItemInView(itemBounds, scrollerBounds, scrollTop, scrollHeight, scrollTopDelta);\n  }\n\n  /**\n   * Calculates the new `scrollLeft`.\n   *\n   * @param {Node} item node\n   * @param {Number} scrollPosition last target position, passed when scroll animation is ongoing\n   *\n   * @returns {Number} Calculated `scrollLeft`\n   * @private\n   */\n  function calculateScrollLeft(item, scrollPosition) {\n    var scrollContentNode = scrollContentRef.current;\n    var _getFocusedItemBounds = getFocusedItemBounds(item),\n      itemLeft = _getFocusedItemBounds.left,\n      itemWidth = _getFocusedItemBounds.width;\n    var rtl = props.rtl,\n      coordinateCoefficient = rtl && (_platform[\"default\"].ios || _platform[\"default\"].safari || _platform[\"default\"].chrome >= 85 || _platform[\"default\"].androidChrome >= 85) ? -1 : 1,\n      clientWidth = scrollContentHandle.current.scrollBounds.clientWidth,\n      rtlDirection = rtl ? -1 : 1,\n      _scrollContentNode$ge = scrollContentNode.getBoundingClientRect(),\n      containerLeft = _scrollContentNode$ge.left,\n      scrollLastPosition = scrollPosition ? scrollPosition : scrollContentHandle.current.scrollPos.left,\n      currentScrollLeft = rtl && coordinateCoefficient === 1 ? scrollContentHandle.current.scrollBounds.maxLeft - scrollLastPosition : scrollLastPosition,\n      newItemLeft = coordinateCoefficient * scrollContentNode.scrollLeft + (itemLeft - containerLeft);\n    var nextScrollLeft = scrollContentHandle.current.scrollPos.left;\n    if (newItemLeft + itemWidth > clientWidth + currentScrollLeft && itemWidth < clientWidth) {\n      // If focus is moved to an element outside of view area (to the right), scroller will move\n      // to the right just enough to show the current `focusedItem`. This does not apply to\n      // `focusedItem` that has a width that is bigger than `scrollBounds.clientWidth`.\n      nextScrollLeft += rtlDirection * (newItemLeft + itemWidth - (clientWidth + currentScrollLeft));\n    } else if (newItemLeft < currentScrollLeft) {\n      // If focus is outside of the view area to the left, move scroller to the left accordingly.\n      nextScrollLeft += rtlDirection * (newItemLeft - currentScrollLeft);\n    }\n    return nextScrollLeft;\n  }\n\n  /**\n   * Calculates the new top and left position for scroller based on focusedItem.\n   *\n   * @param {Node} item node\n   * @param {Number} scrollPosition last target position, passed scroll animation is ongoing\n   *\n   * @returns {Object} with keys {top, left} containing calculated top and left positions for scroll.\n   * @private\n   */\n  function calculatePositionOnFocus(_ref2) {\n    var item = _ref2.item,\n      scrollPosition = _ref2.scrollPosition;\n    var containerNode = scrollContentRef.current;\n    var horizontal = scrollContentHandle.current.isHorizontal();\n    var vertical = scrollContentHandle.current.isVertical();\n    if (!vertical && !horizontal || !item || !_utilDOM[\"default\"].containsDangerously(containerNode, item)) {\n      return;\n    }\n    var containerRect = (0, _utils.getRect)(containerNode);\n    var itemRect = (0, _utils.getRect)(item);\n    if (horizontal && !(itemRect.left >= containerRect.left + _resolution[\"default\"].scale(_useScroll.affordanceSize) && itemRect.right <= containerRect.right - _resolution[\"default\"].scale(_useScroll.affordanceSize))) {\n      scrollContentHandle.current.scrollPos.left = calculateScrollLeft(item, scrollPosition);\n    }\n    if (vertical && !(itemRect.top >= containerRect.top && itemRect.bottom <= containerRect.bottom - _resolution[\"default\"].scale(_useScroll.affordanceSize))) {\n      scrollContentHandle.current.scrollPos.top = calculateScrollTop(item);\n    }\n    return scrollContentHandle.current.scrollPos;\n  }\n  function focusOnNode(node) {\n    if (node) {\n      _spotlight[\"default\"].focus(node);\n    }\n  }\n\n  // Return\n\n  return {\n    calculatePositionOnFocus: calculatePositionOnFocus,\n    focusOnNode: focusOnNode,\n    setContainerDisabled: setContainerDisabled\n  };\n};\nvar useThemeScroller = function useThemeScroller(props, scrollContentProps, contentId, isHorizontalScrollbarVisible, isVerticalScrollbarVisible) {\n  var className = scrollContentProps.className,\n    children = scrollContentProps.children,\n    editable = scrollContentProps.editable,\n    fadeOut = scrollContentProps.fadeOut,\n    scrollContainerRef = scrollContentProps.scrollContainerRef,\n    rest = _objectWithoutProperties(scrollContentProps, _excluded);\n  var scrollContainerHandle = rest.scrollContainerHandle,\n    scrollContentHandle = rest.scrollContentHandle,\n    scrollContentRef = rest.scrollContentRef;\n  delete rest.onUpdate;\n  delete rest.scrollContainerContainsDangerously;\n  delete rest.scrollContainerHandle;\n  delete rest.scrollContentHandle;\n  delete rest.setThemeScrollContentHandle;\n  delete rest.spotlightId;\n\n  // Hooks\n  var isScrollbarVisible = isHorizontalScrollbarVisible || isVerticalScrollbarVisible;\n  var _useSpottable = useSpottable(scrollContentProps, {\n      scrollContainerRef: scrollContainerRef,\n      scrollContentHandle: scrollContentHandle,\n      scrollContentRef: scrollContentRef\n    }),\n    calculatePositionOnFocus = _useSpottable.calculatePositionOnFocus,\n    focusOnNode = _useSpottable.focusOnNode,\n    setContainerDisabled = _useSpottable.setContainerDisabled;\n  var _ref3 = props.focusableScrollbar === 'byEnter' ? getFocusableBodyProps(scrollContainerRef, contentId, isScrollbarVisible) : {},\n    setNavigableFilter = _ref3.setNavigableFilter,\n    focusableBodyProps = _objectWithoutProperties(_ref3, _excluded2);\n  (0, _react.useLayoutEffect)(function () {\n    // Initial filter setting\n    if (setNavigableFilter) {\n      setNavigableFilter({\n        filterTarget: 'body'\n      });\n    }\n  }, [props.focusableScrollbar, scrollContainerRef.current]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  scrollContentProps.setThemeScrollContentHandle({\n    calculatePositionOnFocus: calculatePositionOnFocus,\n    focusOnNode: focusOnNode,\n    setContainerDisabled: setContainerDisabled\n  });\n\n  // Render\n\n  rest.className = (0, _classnames[\"default\"])(className, !isHorizontalScrollbarVisible && isVerticalScrollbarVisible && fadeOut ? _ScrollerModule[\"default\"].verticalFadeout : null, isHorizontalScrollbarVisible && !isVerticalScrollbarVisible && fadeOut ? _ScrollerModule[\"default\"].horizontalFadeout : null);\n  return {\n    editableWrapperProps: {\n      children: children,\n      editable: editable,\n      scrollContainerHandle: scrollContainerHandle,\n      scrollContainerRef: scrollContainerRef,\n      scrollContentRef: scrollContentRef\n    },\n    focusableBodyProps: focusableBodyProps,\n    themeScrollContentProps: _objectSpread({}, rest)\n  };\n};\nexports.useThemeScroller = useThemeScroller;\nvar _default = useThemeScroller;\nexports[\"default\"] = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","useThemeScroller","_handle","require","_keymap","_platform","_interopRequireDefault","_spotlight","_utils","_resolution","_utilDOM","_classnames","_react","_useScroll","_useEvent","_ScrollerModule","_ScrollbarTrackModule","_excluded","_excluded2","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","sourceKeys","isCancel","is","isEnter","isBody","elem","classList","contains","focusableBody","getFocusableBodyProps","scrollContainerRef","contentId","isScrollbarVisible","spotlightId","current","dataset","setNavigableFilter","_ref","filterTarget","targetClassName","thumb","set","navigableFilter","getNavigableFilterTarget","ev","keyCode","type","getPointerMode","consumeEventWithFocus","nextTarget","spottableDescendants","getSpottableDescendants","pop","verticalThumb","closest","concat","focus","preventDefault","nativeEvent","stopImmediatePropagation","className","onFocus","handle","forward","adaptEvent","onBlur","onKeyDown","useSpottable","props","instances","scrollContentHandle","scrollContentRef","_useEventKey","useEventKey","addGlobalKeyDownEventListener","removeGlobalKeyDownEventListener","setContainerDisabled","useCallback","bool","spotlightContainerDisabled","useEffect","onUpdate","getSpotlightContainerForNode","node","spotlightContainer","expandableContainer","parentNode","getFocusedItemBounds","getBoundingClientRect","calculateScrollTop","item","threshold","scale","roundToStart","sb","st","roundToEnd","sh","height","affordanceSize","isItemBeforeView","ib","d","top","isItemAfterView","canItemFit","calcItemAtStart","calcItemAtEnd","calcItemInView","container","scrollerBounds","_scrollContentRef$cur","scrollHeight","scrollTop","scrollTopDelta","adjustScrollTop","v","containerBounds","itemBounds","calculateScrollLeft","scrollPosition","scrollContentNode","_getFocusedItemBounds","itemLeft","left","itemWidth","width","rtl","coordinateCoefficient","ios","safari","chrome","androidChrome","clientWidth","scrollBounds","rtlDirection","_scrollContentNode$ge","containerLeft","scrollLastPosition","scrollPos","currentScrollLeft","maxLeft","newItemLeft","scrollLeft","nextScrollLeft","calculatePositionOnFocus","_ref2","containerNode","horizontal","isHorizontal","vertical","isVertical","containsDangerously","containerRect","getRect","itemRect","right","bottom","focusOnNode","scrollContentProps","isHorizontalScrollbarVisible","isVerticalScrollbarVisible","children","editable","fadeOut","rest","scrollContainerHandle","scrollContainerContainsDangerously","setThemeScrollContentHandle","_useSpottable","_ref3","focusableScrollbar","focusableBodyProps","useLayoutEffect","verticalFadeout","horizontalFadeout","editableWrapperProps","themeScrollContentProps","_default"],"sources":["/home/islab/LGEE/project/frontend/node_modules/@enact/sandstone/Scroller/useThemeScroller.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useThemeScroller = exports[\"default\"] = void 0;\nvar _handle = require(\"@enact/core/handle\");\nvar _keymap = require(\"@enact/core/keymap\");\nvar _platform = _interopRequireDefault(require(\"@enact/core/platform\"));\nvar _spotlight = _interopRequireDefault(require(\"@enact/spotlight\"));\nvar _utils = require(\"@enact/spotlight/src/utils\");\nvar _resolution = _interopRequireDefault(require(\"@enact/ui/resolution\"));\nvar _utilDOM = _interopRequireDefault(require(\"@enact/ui/useScroll/utilDOM\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _react = require(\"react\");\nvar _useScroll = require(\"../useScroll\");\nvar _useEvent = require(\"./useEvent\");\nvar _ScrollerModule = _interopRequireDefault(require(\"./Scroller.module.css\"));\nvar _ScrollbarTrackModule = _interopRequireDefault(require(\"../useScroll/ScrollbarTrack.module.css\"));\nvar _excluded = [\"className\", \"children\", \"editable\", \"fadeOut\", \"scrollContainerRef\"],\n  _excluded2 = [\"setNavigableFilter\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nvar isCancel = (0, _keymap.is)('cancel'),\n  isEnter = (0, _keymap.is)('enter'),\n  isBody = function isBody(elem) {\n    return elem.classList.contains(_ScrollerModule[\"default\"].focusableBody);\n  };\nvar getFocusableBodyProps = function getFocusableBodyProps(scrollContainerRef, contentId, isScrollbarVisible) {\n  var spotlightId = scrollContainerRef.current && scrollContainerRef.current.dataset.spotlightId;\n  var setNavigableFilter = function setNavigableFilter(_ref) {\n    var filterTarget = _ref.filterTarget;\n    spotlightId = scrollContainerRef.current && scrollContainerRef.current.dataset.spotlightId;\n    if (spotlightId && filterTarget) {\n      var targetClassName = filterTarget === 'body' ? _ScrollerModule[\"default\"].focusableBody : _ScrollbarTrackModule[\"default\"].thumb;\n      _spotlight[\"default\"].set(spotlightId, {\n        navigableFilter: function navigableFilter(elem) {\n          return typeof elem === 'string' || !elem.classList.contains(targetClassName);\n        }\n      });\n      return true;\n    }\n    return false;\n  };\n  var getNavigableFilterTarget = function getNavigableFilterTarget(ev) {\n    var keyCode = ev.keyCode,\n      target = ev.target,\n      type = ev.type;\n    var filterTarget = null;\n    if (!isScrollbarVisible) {\n      return {\n        filterTarget: filterTarget\n      };\n    }\n    if (type === 'focus') {\n      filterTarget = isBody(target) ? 'thumb' : 'body';\n    } else if (type === 'blur') {\n      filterTarget = 'body';\n    } else if (type === 'keydown') {\n      filterTarget = !_spotlight[\"default\"].getPointerMode() && isEnter(keyCode) && isBody(target) && 'body' || isEnter(keyCode) && !isBody(target) && 'thumb' || isCancel(keyCode) && !isBody(target) && 'thumb' || null;\n    }\n    return {\n      filterTarget: filterTarget\n    };\n  };\n  var consumeEventWithFocus = function consumeEventWithFocus(ev) {\n    var target = ev.target;\n    var nextTarget;\n    if (isBody(target)) {\n      // Enter key on scroll Body.\n      // Scroll thumb get focus.\n      var spottableDescendants = _spotlight[\"default\"].getSpottableDescendants(spotlightId);\n      if (spottableDescendants.length > 0) {\n        // Last spottable descendant(thumb) get focus.\n        nextTarget = spottableDescendants.pop();\n\n        // If there are both thumbs, vertical thumb is the next target\n        var verticalThumb = spottableDescendants.pop();\n        nextTarget = verticalThumb && verticalThumb.classList.contains(_ScrollbarTrackModule[\"default\"].thumb) ? verticalThumb : nextTarget;\n      }\n    } else {\n      // Enter or Cancel key on scroll thumb.\n      // Scroll body get focus.\n      nextTarget = target.closest(\".\".concat(_ScrollerModule[\"default\"].focusableBody));\n    }\n    if (nextTarget) {\n      _spotlight[\"default\"].focus(nextTarget);\n      ev.preventDefault();\n      ev.nativeEvent.stopImmediatePropagation();\n    }\n  };\n  return {\n    'aria-labelledby': contentId,\n    className: _ScrollerModule[\"default\"].focusableBody,\n    onFocus: (0, _handle.handle)((0, _handle.forward)('onFocus'), (0, _handle.adaptEvent)(getNavigableFilterTarget, setNavigableFilter)),\n    onBlur: (0, _handle.handle)(\n    // Focus out to external element.\n    (0, _handle.forward)('onBlur'), (0, _handle.adaptEvent)(getNavigableFilterTarget, setNavigableFilter)),\n    onKeyDown: (0, _handle.handle)((0, _handle.forward)('onKeyDown'), (0, _handle.adaptEvent)(getNavigableFilterTarget, setNavigableFilter), consumeEventWithFocus),\n    setNavigableFilter: setNavigableFilter\n  };\n};\nvar useSpottable = function useSpottable(props, instances) {\n  var scrollContainerRef = instances.scrollContainerRef,\n    scrollContentHandle = instances.scrollContentHandle,\n    scrollContentRef = instances.scrollContentRef;\n\n  // Hooks\n\n  var _useEventKey = (0, _useEvent.useEventKey)(),\n    addGlobalKeyDownEventListener = _useEventKey.addGlobalKeyDownEventListener,\n    removeGlobalKeyDownEventListener = _useEventKey.removeGlobalKeyDownEventListener;\n  var setContainerDisabled = (0, _react.useCallback)(function (bool) {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.dataset.spotlightContainerDisabled = bool;\n      if (bool) {\n        addGlobalKeyDownEventListener(function () {\n          setContainerDisabled(false);\n        });\n      } else {\n        removeGlobalKeyDownEventListener();\n      }\n    }\n  }, [addGlobalKeyDownEventListener, removeGlobalKeyDownEventListener, scrollContainerRef]);\n  (0, _react.useEffect)(function () {\n    return function () {\n      return setContainerDisabled(false);\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  (0, _react.useEffect)(function () {\n    var onUpdate = props.onUpdate;\n    if (onUpdate) {\n      onUpdate();\n    }\n  });\n\n  // Functions\n\n  /**\n   * Returns the first spotlight container between `node` and the scroller\n   *\n   * @param {Node} node A DOM node\n   *\n   * @returns {Node|Null} Spotlight container for `node`\n   * @private\n   */\n  function getSpotlightContainerForNode(node) {\n    do {\n      if (node.dataset.spotlightId && node.dataset.spotlightContainer && !node.dataset.expandableContainer) {\n        return node;\n      }\n    } while ((node = node.parentNode) && node !== scrollContentRef.current);\n  }\n\n  /**\n   * Calculates the \"focus bounds\" of a node. If the node is within a spotlight container, that\n   * container is scrolled into view rather than just the element.\n   *\n   * @param {Node} node Focused node\n   *\n   * @returns {Object} Bounds as returned by `getBoundingClientRect`\n   * @private\n   */\n  function getFocusedItemBounds(node) {\n    node = getSpotlightContainerForNode(node) || node;\n    return node.getBoundingClientRect();\n  }\n\n  /**\n   * Calculates the new `scrollTop`.\n   *\n   * @param {Node} item Focused item node\n   *\n   * @returns {Number} Calculated `scrollTop`\n   * @private\n   */\n  function calculateScrollTop(item) {\n    var threshold = _resolution[\"default\"].scale(48);\n    var roundToStart = function roundToStart(sb, st) {\n      // round to start\n      if (st < threshold) return 0;\n      return st;\n    };\n    var roundToEnd = function roundToEnd(sb, st, sh) {\n      // round to end\n      if (sh - (st + sb.height) < threshold) return sh - sb.height;\n      return st + _resolution[\"default\"].scale(_useScroll.affordanceSize);\n    };\n    // adding threshold into these determinations ensures that items that are within that are\n    // near the bounds of the scroller cause the edge to be scrolled into view even when the\n    // item itself is in view (e.g. due to margins)\n    var isItemBeforeView = function isItemBeforeView(ib, sb, d) {\n      return ib.top + d - threshold < sb.top;\n    };\n    var isItemAfterView = function isItemAfterView(ib, sb, d) {\n      return ib.top + d + ib.height + threshold > sb.top + sb.height;\n    };\n    var canItemFit = function canItemFit(ib, sb) {\n      return ib.height <= sb.height;\n    };\n    var calcItemAtStart = function calcItemAtStart(ib, sb, st, d) {\n      return ib.top + st + d - sb.top;\n    };\n    var calcItemAtEnd = function calcItemAtEnd(ib, sb, st, d) {\n      return ib.top + ib.height + st + d - (sb.top + sb.height);\n    };\n    var calcItemInView = function calcItemInView(ib, sb, st, sh, d) {\n      if (isItemBeforeView(ib, sb, d)) {\n        return roundToStart(sb, calcItemAtStart(ib, sb, st, d));\n      } else if (isItemAfterView(ib, sb, d)) {\n        return roundToEnd(sb, calcItemAtEnd(ib, sb, st, d), sh);\n      }\n      return st;\n    };\n    var container = getSpotlightContainerForNode(item);\n    var scrollerBounds = scrollContentRef.current.getBoundingClientRect();\n    var _scrollContentRef$cur = scrollContentRef.current,\n      scrollHeight = _scrollContentRef$cur.scrollHeight,\n      scrollTop = _scrollContentRef$cur.scrollTop;\n    var scrollTopDelta = 0;\n    var adjustScrollTop = function adjustScrollTop(v) {\n      scrollTopDelta = scrollTop - v;\n      scrollTop = v;\n    };\n    if (container) {\n      var containerBounds = container.getBoundingClientRect();\n\n      // if the entire container fits in the scroller, scroll it into view\n      if (canItemFit(containerBounds, scrollerBounds)) {\n        return calcItemInView(containerBounds, scrollerBounds, scrollTop, scrollHeight, scrollTopDelta);\n      }\n\n      // if the container doesn't fit, adjust the scroll top ...\n      if (containerBounds.top > scrollerBounds.top) {\n        // ... to the top of the container if the top is below the top of the scroller\n        adjustScrollTop(calcItemAtStart(containerBounds, scrollerBounds, scrollTop, scrollTopDelta));\n      }\n      // removing support for \"snap to bottom\" for 2.2.8\n      // } else if (containerBounds.top + containerBounds.height < scrollerBounds.top + scrollerBounds.height) {\n      // \t// ... to the bottom of the container if the bottom is above the bottom of the\n      // \t// scroller\n      // \tadjustScrollTop(calcItemAtEnd(containerBounds, scrollerBounds, scrollTop, scrollTopDelta));\n      // }\n\n      // N.B. if the container covers the scrollable area (its top is above the top of the\n      // scroller and its bottom is below the bottom of the scroller), we need not adjust the\n      // scroller to ensure the container is wholly in view.\n    }\n\n    var itemBounds = item.getBoundingClientRect();\n    return calcItemInView(itemBounds, scrollerBounds, scrollTop, scrollHeight, scrollTopDelta);\n  }\n\n  /**\n   * Calculates the new `scrollLeft`.\n   *\n   * @param {Node} item node\n   * @param {Number} scrollPosition last target position, passed when scroll animation is ongoing\n   *\n   * @returns {Number} Calculated `scrollLeft`\n   * @private\n   */\n  function calculateScrollLeft(item, scrollPosition) {\n    var scrollContentNode = scrollContentRef.current;\n    var _getFocusedItemBounds = getFocusedItemBounds(item),\n      itemLeft = _getFocusedItemBounds.left,\n      itemWidth = _getFocusedItemBounds.width;\n    var rtl = props.rtl,\n      coordinateCoefficient = rtl && (_platform[\"default\"].ios || _platform[\"default\"].safari || _platform[\"default\"].chrome >= 85 || _platform[\"default\"].androidChrome >= 85) ? -1 : 1,\n      clientWidth = scrollContentHandle.current.scrollBounds.clientWidth,\n      rtlDirection = rtl ? -1 : 1,\n      _scrollContentNode$ge = scrollContentNode.getBoundingClientRect(),\n      containerLeft = _scrollContentNode$ge.left,\n      scrollLastPosition = scrollPosition ? scrollPosition : scrollContentHandle.current.scrollPos.left,\n      currentScrollLeft = rtl && coordinateCoefficient === 1 ? scrollContentHandle.current.scrollBounds.maxLeft - scrollLastPosition : scrollLastPosition,\n      newItemLeft = coordinateCoefficient * scrollContentNode.scrollLeft + (itemLeft - containerLeft);\n    var nextScrollLeft = scrollContentHandle.current.scrollPos.left;\n    if (newItemLeft + itemWidth > clientWidth + currentScrollLeft && itemWidth < clientWidth) {\n      // If focus is moved to an element outside of view area (to the right), scroller will move\n      // to the right just enough to show the current `focusedItem`. This does not apply to\n      // `focusedItem` that has a width that is bigger than `scrollBounds.clientWidth`.\n      nextScrollLeft += rtlDirection * (newItemLeft + itemWidth - (clientWidth + currentScrollLeft));\n    } else if (newItemLeft < currentScrollLeft) {\n      // If focus is outside of the view area to the left, move scroller to the left accordingly.\n      nextScrollLeft += rtlDirection * (newItemLeft - currentScrollLeft);\n    }\n    return nextScrollLeft;\n  }\n\n  /**\n   * Calculates the new top and left position for scroller based on focusedItem.\n   *\n   * @param {Node} item node\n   * @param {Number} scrollPosition last target position, passed scroll animation is ongoing\n   *\n   * @returns {Object} with keys {top, left} containing calculated top and left positions for scroll.\n   * @private\n   */\n  function calculatePositionOnFocus(_ref2) {\n    var item = _ref2.item,\n      scrollPosition = _ref2.scrollPosition;\n    var containerNode = scrollContentRef.current;\n    var horizontal = scrollContentHandle.current.isHorizontal();\n    var vertical = scrollContentHandle.current.isVertical();\n    if (!vertical && !horizontal || !item || !_utilDOM[\"default\"].containsDangerously(containerNode, item)) {\n      return;\n    }\n    var containerRect = (0, _utils.getRect)(containerNode);\n    var itemRect = (0, _utils.getRect)(item);\n    if (horizontal && !(itemRect.left >= containerRect.left + _resolution[\"default\"].scale(_useScroll.affordanceSize) && itemRect.right <= containerRect.right - _resolution[\"default\"].scale(_useScroll.affordanceSize))) {\n      scrollContentHandle.current.scrollPos.left = calculateScrollLeft(item, scrollPosition);\n    }\n    if (vertical && !(itemRect.top >= containerRect.top && itemRect.bottom <= containerRect.bottom - _resolution[\"default\"].scale(_useScroll.affordanceSize))) {\n      scrollContentHandle.current.scrollPos.top = calculateScrollTop(item);\n    }\n    return scrollContentHandle.current.scrollPos;\n  }\n  function focusOnNode(node) {\n    if (node) {\n      _spotlight[\"default\"].focus(node);\n    }\n  }\n\n  // Return\n\n  return {\n    calculatePositionOnFocus: calculatePositionOnFocus,\n    focusOnNode: focusOnNode,\n    setContainerDisabled: setContainerDisabled\n  };\n};\nvar useThemeScroller = function useThemeScroller(props, scrollContentProps, contentId, isHorizontalScrollbarVisible, isVerticalScrollbarVisible) {\n  var className = scrollContentProps.className,\n    children = scrollContentProps.children,\n    editable = scrollContentProps.editable,\n    fadeOut = scrollContentProps.fadeOut,\n    scrollContainerRef = scrollContentProps.scrollContainerRef,\n    rest = _objectWithoutProperties(scrollContentProps, _excluded);\n  var scrollContainerHandle = rest.scrollContainerHandle,\n    scrollContentHandle = rest.scrollContentHandle,\n    scrollContentRef = rest.scrollContentRef;\n  delete rest.onUpdate;\n  delete rest.scrollContainerContainsDangerously;\n  delete rest.scrollContainerHandle;\n  delete rest.scrollContentHandle;\n  delete rest.setThemeScrollContentHandle;\n  delete rest.spotlightId;\n\n  // Hooks\n  var isScrollbarVisible = isHorizontalScrollbarVisible || isVerticalScrollbarVisible;\n  var _useSpottable = useSpottable(scrollContentProps, {\n      scrollContainerRef: scrollContainerRef,\n      scrollContentHandle: scrollContentHandle,\n      scrollContentRef: scrollContentRef\n    }),\n    calculatePositionOnFocus = _useSpottable.calculatePositionOnFocus,\n    focusOnNode = _useSpottable.focusOnNode,\n    setContainerDisabled = _useSpottable.setContainerDisabled;\n  var _ref3 = props.focusableScrollbar === 'byEnter' ? getFocusableBodyProps(scrollContainerRef, contentId, isScrollbarVisible) : {},\n    setNavigableFilter = _ref3.setNavigableFilter,\n    focusableBodyProps = _objectWithoutProperties(_ref3, _excluded2);\n  (0, _react.useLayoutEffect)(function () {\n    // Initial filter setting\n    if (setNavigableFilter) {\n      setNavigableFilter({\n        filterTarget: 'body'\n      });\n    }\n  }, [props.focusableScrollbar, scrollContainerRef.current]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  scrollContentProps.setThemeScrollContentHandle({\n    calculatePositionOnFocus: calculatePositionOnFocus,\n    focusOnNode: focusOnNode,\n    setContainerDisabled: setContainerDisabled\n  });\n\n  // Render\n\n  rest.className = (0, _classnames[\"default\"])(className, !isHorizontalScrollbarVisible && isVerticalScrollbarVisible && fadeOut ? _ScrollerModule[\"default\"].verticalFadeout : null, isHorizontalScrollbarVisible && !isVerticalScrollbarVisible && fadeOut ? _ScrollerModule[\"default\"].horizontalFadeout : null);\n  return {\n    editableWrapperProps: {\n      children: children,\n      editable: editable,\n      scrollContainerHandle: scrollContainerHandle,\n      scrollContainerRef: scrollContainerRef,\n      scrollContentRef: scrollContentRef\n    },\n    focusableBodyProps: focusableBodyProps,\n    themeScrollContentProps: _objectSpread({}, rest)\n  };\n};\nexports.useThemeScroller = useThemeScroller;\nvar _default = useThemeScroller;\nexports[\"default\"] = _default;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}