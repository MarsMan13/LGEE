{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.EditableWrapper = exports.EditableShape = void 0;\nvar _handle = require(\"@enact/core/handle\");\nvar _propTypes = _interopRequireDefault(require(\"@enact/core/internal/prop-types\"));\nvar _keymap = require(\"@enact/core/keymap\");\nvar _usePublicClassNames = require(\"@enact/core/usePublicClassNames\");\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\nvar _container = require(\"@enact/spotlight/src/container\");\nvar _target = require(\"@enact/spotlight/src/target\");\nvar _Accelerator = _interopRequireDefault(require(\"@enact/spotlight/Accelerator\"));\nvar _pointer = require(\"@enact/spotlight/src/pointer\");\nvar _AnnounceDecorator = require(\"@enact/ui/AnnounceDecorator\");\nvar _Touchable = _interopRequireDefault(require(\"@enact/ui/Touchable\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _IString = _interopRequireDefault(require(\"ilib/lib/IString\"));\nvar _propTypes2 = _interopRequireDefault(require(\"prop-types\"));\nvar _react = require(\"react\");\nvar _$L = _interopRequireDefault(require(\"../internal/$L\"));\nvar _EditableWrapperModule = _interopRequireDefault(require(\"./EditableWrapper.module.css\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj[\"default\"] = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nvar completeAnnounceDelay = 300; // An arbitrary delay at a level that is not ignored by the new focus element\nvar TouchableDiv = (0, _Touchable[\"default\"])('div');\n\n/**\n * The shape for editable of {@link sandstone/Scroller|Scroller}.\n *\n * @typedef {Object} EditableShape\n * @memberof sandstone/Scroller\n * @property {Function} onComplete The callback function called when editing is finished.\n *  It has an event object contains `orders` array which app can use for repopulate items.\n * @property {Boolean} [centered] Centers the contents of the scroller.\n * @property {Object} [css] Customizes the component by mapping the supplied collection of CSS class names to the\n *  corresponding internal elements and states of this component.\n *  The following classes are supported:\n *\n * * `wrapper` - The content wrapper component class\n * * `selected` - The selected item class\n * * `focused` - The focused item class\n * @property {Function|Object} [focusItemFuncRef] Obtains a reference to `focusItem` function.\n *  If you would like to use `focused` CSS class to an item, you can get the reference to `focusItem` function via `useRef`.\n * `focusItem` function need to be called with an item node when an item is focused.\n * @property {Function|Object} [hideItemFuncRef] Obtains a reference to `hideItem` function.\n *  If you would like to hide an item, you can get the reference to `hideItem` function via `useRef`.\n * @property {Function|Object} [removeItemFuncRef] Obtains a reference to `removeItem` function.\n *  If you would like to remove an item, you can get the reference to `removeItem` function via `useRef`.\n * @property {string} [selectItemBy] Decides how to start editing items.\n *  It can be either `'press'` or `'longPress'`. If unset, it defaults to `'longPress'`.\n * @property {Function|Object} [showItemFuncRef] Obtains a reference to `showItem` function.\n *  If you would like to show an item, you can get the reference to `showItem` function via `useRef`.\n * @public\n */\nvar EditableShape = _propTypes2[\"default\"].shape({\n  onComplete: _propTypes2[\"default\"].func.isRequired,\n  centered: _propTypes2[\"default\"].bool,\n  css: _propTypes2[\"default\"].object,\n  focusItemFuncRef: _propTypes[\"default\"].ref,\n  hideItemFuncRef: _propTypes[\"default\"].ref,\n  removeItemFuncRef: _propTypes[\"default\"].ref,\n  selectItemBy: _propTypes2[\"default\"].string,\n  showItemFuncRef: _propTypes[\"default\"].ref\n});\nexports.EditableShape = EditableShape;\nvar SpotlightAccelerator = new _Accelerator[\"default\"]([5, 4]);\nvar holdDuration = 500;\nvar holdConfig = {\n  events: [{\n    name: 'hold',\n    time: holdDuration\n  }]\n};\n\n/**\n * A Sandstone-styled EditableWrapper.\n *\n * @class EditableWrapper\n * @memberof sandstone/Scroller\n * @ui\n * @public\n */\nvar EditableWrapper = function EditableWrapper(props) {\n  var _editable$hideIndex;\n  var children = props.children,\n    editable = props.editable,\n    scrollContainerHandle = props.scrollContainerHandle,\n    scrollContainerRef = props.scrollContainerRef,\n    scrollContentRef = props.scrollContentRef;\n  var centered = (editable === null || editable === void 0 ? void 0 : editable.centered) != null ? editable.centered : true;\n  var selectItemBy = (editable === null || editable === void 0 ? void 0 : editable.selectItemBy) || 'longPress';\n  var customCss = (editable === null || editable === void 0 ? void 0 : editable.css) || {};\n  var removeItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.removeItemFuncRef;\n  var hideItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.hideItemFuncRef;\n  var showItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.showItemFuncRef;\n  var focusItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.focusItemFuncRef;\n  var initialSelected = editable === null || editable === void 0 ? void 0 : editable.initialSelected;\n  var mergedCss = (0, _usePublicClassNames.usePublicClassNames)({\n    componentCss: _EditableWrapperModule[\"default\"],\n    customCss: customCss,\n    publicClassNames: true\n  });\n  var dataSize = children === null || children === void 0 ? void 0 : children.length;\n\n  // Mutable value\n  var wrapperRef = (0, _react.useRef)();\n  var mutableRef = (0, _react.useRef)({\n    // Constants\n    itemWidth: null,\n    centeredOffset: 0,\n    spotlightId: null,\n    // DOM elements\n    focusedItem: null,\n    selectedItem: null,\n    selectedItemLabel: '',\n    rearrangedItems: [],\n    // Indices\n    fromIndex: null,\n    prevToIndex: null,\n    hideIndex: null,\n    // Position for restoring focus after removing item\n    nextSpotlightRect: null,\n    // Last move direction\n    lastMoveDirection: null,\n    // Last mouse position\n    lastMouseClientX: null,\n    // Last InputType which moves Items\n    lastInputType: null,\n    lastKeyEventTargetElement: null,\n    // Timer for holding key input\n    keyHoldTimerId: null,\n    // Flag for prevent event propagation\n    needToPreventEvent: null,\n    lastInputDirection: null\n  });\n  var announceRef = (0, _react.useRef)({});\n  mutableRef.current.hideIndex = (_editable$hideIndex = editable === null || editable === void 0 ? void 0 : editable.hideIndex) !== null && _editable$hideIndex !== void 0 ? _editable$hideIndex : dataSize;\n\n  // Functions\n\n  // Reset values\n  var reset = (0, _react.useCallback)(function () {\n    var _mutableRef$current = mutableRef.current,\n      focusedItem = _mutableRef$current.focusedItem,\n      selectedItem = _mutableRef$current.selectedItem,\n      spotlightId = _mutableRef$current.spotlightId;\n    focusedItem === null || focusedItem === void 0 ? void 0 : focusedItem.classList.remove(customCss.focused);\n    selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.classList.remove(_EditableWrapperModule[\"default\"].selected, customCss.selected, _EditableWrapperModule[\"default\"].rearranged);\n    mutableRef.current.focusedItem = null;\n    mutableRef.current.selectedItem = null;\n    mutableRef.current.selectedItemLabel = '';\n    mutableRef.current.lastMoveDirection = null;\n    mutableRef.current.prevToIndex = null;\n    wrapperRef.current.style.setProperty('--selected-item-offset', '0px');\n    _spotlight[\"default\"].set(spotlightId, {\n      restrict: 'self-first'\n    });\n  }, [customCss.focused, customCss.selected]);\n\n  // Finalize the order\n  var finalizeOrders = (0, _react.useCallback)(function () {\n    var _mutableRef$current2 = mutableRef.current,\n      fromIndex = _mutableRef$current2.fromIndex,\n      lastMoveDirection = _mutableRef$current2.lastMoveDirection,\n      prevToIndex = _mutableRef$current2.prevToIndex,\n      rearrangedItems = _mutableRef$current2.rearrangedItems,\n      selectedItem = _mutableRef$current2.selectedItem;\n    var orders = Array.from({\n      length: dataSize\n    }, function (_, i) {\n      return i + 1;\n    });\n    if (rearrangedItems.length > 0) {\n      var selectedOrder = selectedItem.style.order;\n      var changedOrder = [];\n      rearrangedItems.forEach(function (item) {\n        var order = Number(item.style.order);\n        selectedOrder = order;\n        item.style.order = order - lastMoveDirection;\n        item.classList.remove(_EditableWrapperModule[\"default\"].rearrangedTransform, _EditableWrapperModule[\"default\"].rearranged);\n        if (lastMoveDirection > 0) {\n          changedOrder.push(order);\n        } else {\n          changedOrder.unshift(order);\n        }\n      });\n      if (lastMoveDirection > 0) {\n        changedOrder.push(Number(selectedItem.style.order));\n      } else {\n        changedOrder.unshift(Number(selectedItem.style.order));\n      }\n      mutableRef.current.rearrangedItems = [];\n      selectedItem.style.order = selectedOrder;\n\n      // Create reordered array\n      orders.splice.apply(orders, [Math.min(fromIndex, prevToIndex), changedOrder.length].concat(changedOrder));\n    }\n    return orders;\n  }, [dataSize]);\n  var updateArrowIcon = (0, _react.useCallback)(function (index) {\n    var _mutableRef$current$s, _mutableRef$current$s2;\n    (_mutableRef$current$s = mutableRef.current.selectedItem) === null || _mutableRef$current$s === void 0 ? void 0 : _mutableRef$current$s.classList.toggle(customCss.noBefore, index === 0);\n    (_mutableRef$current$s2 = mutableRef.current.selectedItem) === null || _mutableRef$current$s2 === void 0 ? void 0 : _mutableRef$current$s2.classList.toggle(customCss.noAfter, index === mutableRef.current.hideIndex - 1);\n  }, [customCss.noBefore, customCss.noAfter]);\n  var startEditing = (0, _react.useCallback)(function (item) {\n    var _item$dataset;\n    if (item !== null && item !== void 0 && (_item$dataset = item.dataset) !== null && _item$dataset !== void 0 && _item$dataset.index && (!item.hasAttribute('disabled') || item.className.includes('hidden'))) {\n      var _mutableRef$current$f;\n      item.classList.add(_EditableWrapperModule[\"default\"].selected, customCss.selected);\n      mutableRef.current.selectedItem = item;\n      (_mutableRef$current$f = mutableRef.current.focusedItem) === null || _mutableRef$current$f === void 0 ? void 0 : _mutableRef$current$f.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = null;\n      mutableRef.current.selectedItemLabel = (item.ariaLabel || item.textContent) + ' ';\n      mutableRef.current.fromIndex = Number(item.style.order) - 1;\n      mutableRef.current.prevToIndex = mutableRef.current.fromIndex;\n      updateArrowIcon(mutableRef.current.fromIndex);\n      announceRef.current.announce(mutableRef.current.selectedItemLabel + (0, _$L[\"default\"])('Press left or right button to move or press up button for other actions'));\n    }\n  }, [customCss.focused, customCss.selected, updateArrowIcon]);\n  var finalizeEditing = (0, _react.useCallback)(function (orders) {\n    (0, _handle.forwardCustom)('onComplete', function () {\n      return {\n        orders: orders,\n        hideIndex: mutableRef.current.hideIndex\n      };\n    })(null, editable);\n    reset();\n  }, [editable, reset]);\n  var findItemNode = (0, _react.useCallback)(function (node) {\n    for (var current = node; current !== scrollContentRef.current && current !== document; current = current.parentNode) {\n      if (current.dataset.index) {\n        return current;\n      }\n    }\n    return null;\n  }, [scrollContentRef]);\n  var focusItem = (0, _react.useCallback)(function (target) {\n    var announceDisabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var itemNode = findItemNode(target);\n    if (itemNode && !mutableRef.current.selectedItem) {\n      var _mutableRef$current$f2, _mutableRef$current$f3;\n      (_mutableRef$current$f2 = mutableRef.current.focusedItem) === null || _mutableRef$current$f2 === void 0 ? void 0 : _mutableRef$current$f2.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = itemNode;\n      (_mutableRef$current$f3 = mutableRef.current.focusedItem) === null || _mutableRef$current$f3 === void 0 ? void 0 : _mutableRef$current$f3.classList.add(customCss.focused);\n      mutableRef.current.prevToIndex = Number(itemNode.style.order) - 1;\n      var focusedItemLabel = (itemNode.ariaLabel || itemNode.textContent) + ' ';\n      if (!announceDisabled && (!itemNode.hasAttribute('disabled') || itemNode.className.includes('hidden'))) {\n        setTimeout(function () {\n          announceRef.current.announce(focusedItemLabel + (0, _$L[\"default\"])('Press OK button to move or press up button for other actions'));\n        }, completeAnnounceDelay);\n      }\n    }\n  }, [customCss.focused, findItemNode]);\n  var handleClickCapture = (0, _react.useCallback)(function (ev) {\n    if (ev.target.className.includes('Button')) {\n      return;\n    }\n    // Consume the event to prevent Item behavior\n    if (mutableRef.current.selectedItem || mutableRef.current.needToPreventEvent) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      mutableRef.current.needToPreventEvent = false;\n    }\n  }, []);\n  var handleMouseDown = (0, _react.useCallback)(function (ev) {\n    if (ev.target.className.includes('Button')) {\n      return;\n    }\n    if (mutableRef.current.selectedItem) {\n      // Finalize orders and forward `onComplete` event\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n      if (selectItemBy === 'press') {\n        focusItem(ev.target, true);\n      }\n      mutableRef.current.needToPreventEvent = true;\n    } else {\n      var targetItemNode = findItemNode(ev.target);\n      if (selectItemBy === 'press') {\n        if (targetItemNode && targetItemNode.dataset.index) {\n          // Start editing by adding selected transition to selected item\n          mutableRef.current.targetItemNode = targetItemNode;\n          startEditing(targetItemNode);\n        }\n        mutableRef.current.needToPreventEvent = true;\n      } else {\n        mutableRef.current.targetItemNode = targetItemNode;\n        mutableRef.current.needToPreventEvent = false;\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, findItemNode, focusItem, selectItemBy, startEditing]);\n  var handleHoldStart = (0, _react.useCallback)(function () {\n    var targetItemNode = mutableRef.current.targetItemNode;\n    if (targetItemNode && targetItemNode.dataset.index && selectItemBy === 'longPress') {\n      // Start editing by adding selected transition to selected item\n      startEditing(targetItemNode);\n    }\n  }, [selectItemBy, startEditing]);\n  var readOutCurrentPosition = (0, _react.useCallback)(function (neighborItem) {\n    var _mutableRef$current3 = mutableRef.current,\n      lastInputDirection = _mutableRef$current3.lastInputDirection,\n      lastInputType = _mutableRef$current3.lastInputType,\n      selectedItemLabel = _mutableRef$current3.selectedItemLabel;\n    if (lastInputType === 'key') {\n      if (lastInputDirection === 'left') {\n        announceRef.current.announce(new _IString[\"default\"]((0, _$L[\"default\"])('{selectedItem} moved to the left of {neighborItem}')).format({\n          selectedItem: selectedItemLabel,\n          neighborItem: neighborItem\n        }), true);\n      } else {\n        announceRef.current.announce(new _IString[\"default\"]((0, _$L[\"default\"])('{selectedItem} moved to the right of {neighborItem}')).format({\n          selectedItem: selectedItemLabel,\n          neighborItem: neighborItem\n        }), true);\n      }\n    }\n  }, []);\n\n  // Add rearranged items\n  var addRearrangedItems = (0, _react.useCallback)(function (_ref) {\n    var moveDirection = _ref.moveDirection,\n      toIndex = _ref.toIndex;\n    // Set the moveDirection to css variable\n    var rtl = scrollContainerHandle.current.rtl;\n    wrapperRef.current.style.setProperty('--move-direction', moveDirection * (rtl ? -1 : 1));\n    var _mutableRef$current4 = mutableRef.current,\n      fromIndex = _mutableRef$current4.fromIndex,\n      rearrangedItems = _mutableRef$current4.rearrangedItems,\n      selectedItem = _mutableRef$current4.selectedItem;\n    var getNextElement = function getNextElement(item) {\n      return moveDirection > 0 ? item.nextElementSibling : item.previousElementSibling;\n    };\n    var sibling = getNextElement(selectedItem);\n    var lastRearrangedItem;\n    var start = moveDirection > 0 ? toIndex : fromIndex;\n    var end = moveDirection > 0 ? fromIndex : toIndex;\n    while (start > end && sibling) {\n      var _sibling;\n      (_sibling = sibling) === null || _sibling === void 0 ? void 0 : _sibling.classList.add(_EditableWrapperModule[\"default\"].rearranged, _EditableWrapperModule[\"default\"].rearrangedTransform);\n      if (!rearrangedItems.includes(sibling)) {\n        rearrangedItems.push(sibling);\n      }\n      lastRearrangedItem = sibling;\n      sibling = getNextElement(sibling);\n      start--;\n    }\n    if (lastRearrangedItem) {\n      readOutCurrentPosition(lastRearrangedItem.ariaLabel || lastRearrangedItem.textContent);\n    }\n    mutableRef.current.lastMoveDirection = moveDirection;\n  }, [readOutCurrentPosition, scrollContainerHandle]);\n  var removeRearrangedItems = (0, _react.useCallback)(function (numToRemove) {\n    var rearrangedItems = mutableRef.current.rearrangedItems;\n    var toItem = null;\n    if (rearrangedItems.length > 0) {\n      for (var i = 0; i < numToRemove; i++) {\n        var _toItem;\n        toItem = rearrangedItems.pop();\n        (_toItem = toItem) === null || _toItem === void 0 ? void 0 : _toItem.classList.remove(_EditableWrapperModule[\"default\"].rearrangedTransform);\n      }\n    }\n    if (toItem) {\n      readOutCurrentPosition(toItem.ariaLabel || toItem.textContent);\n    }\n  }, [readOutCurrentPosition]);\n\n  // Move items\n  var moveItems = (0, _react.useCallback)(function (toIndex) {\n    var selectedItem = mutableRef.current.selectedItem;\n    var rtl = scrollContainerHandle.current.rtl;\n    if (selectedItem) {\n      // Bail out when index is out of scope\n      if (toIndex < mutableRef.current.hideIndex && toIndex >= 0) {\n        var _mutableRef$current5 = mutableRef.current,\n          fromIndex = _mutableRef$current5.fromIndex,\n          itemWidth = _mutableRef$current5.itemWidth,\n          lastMoveDirection = _mutableRef$current5.lastMoveDirection,\n          prevToIndex = _mutableRef$current5.prevToIndex,\n          rearrangedItems = _mutableRef$current5.rearrangedItems;\n\n        // Set the selected item's offset to css variable\n        var offset = (toIndex - fromIndex) * itemWidth;\n        wrapperRef.current.style.setProperty('--selected-item-offset', offset * (rtl ? -1 : 1) + 'px');\n\n        // If the current toIndex is new,\n        if (toIndex !== prevToIndex) {\n          // Determine the direction of move from the latest from index\n          var moveDirection = Math.sign(toIndex - prevToIndex);\n          // If the direction is changed and there are rearranged items, we remove them first.\n          if (lastMoveDirection && moveDirection !== lastMoveDirection && rearrangedItems.length > 0) {\n            var numToRemove = moveDirection > 0 ? toIndex - prevToIndex : prevToIndex - toIndex;\n            removeRearrangedItems(numToRemove);\n\n            // When there's jump, meaning, numToRemove is bigger than 0, we need to add an item\n            if (numToRemove > rearrangedItems.length) {\n              addRearrangedItems({\n                moveDirection: moveDirection,\n                toIndex: toIndex\n              });\n            }\n          } else {\n            addRearrangedItems({\n              moveDirection: moveDirection,\n              toIndex: toIndex\n            });\n          }\n          mutableRef.current.prevToIndex = toIndex;\n        }\n        updateArrowIcon(toIndex);\n      }\n    }\n  }, [addRearrangedItems, removeRearrangedItems, scrollContainerHandle, updateArrowIcon]);\n  var moveItemsByKeyDown = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode;\n    var container = scrollContentRef.current;\n    var _mutableRef$current6 = mutableRef.current,\n      itemWidth = _mutableRef$current6.itemWidth,\n      prevToIndex = _mutableRef$current6.prevToIndex;\n    var rtl = scrollContainerHandle.current.rtl;\n    var toIndex = !rtl ^ !(0, _keymap.is)('left', keyCode) ? prevToIndex - 1 : prevToIndex + 1;\n    var scrollLeft = container.scrollLeft * (rtl ? -1 : 1);\n    var itemLeft = toIndex * itemWidth - scrollLeft;\n    var left;\n    if (itemLeft > container.offsetLeft + container.clientWidth - itemWidth) {\n      left = itemLeft - (container.clientWidth - itemWidth) + scrollLeft;\n    } else if (itemLeft < 0) {\n      left = scrollLeft + itemLeft;\n    }\n    if (left != null) {\n      /* avoid null or undefined */\n      scrollContainerHandle.current.start({\n        targetX: left,\n        targetY: 0\n      });\n    }\n    mutableRef.current.lastInputType = 'key';\n    mutableRef.current.lastInputDirection = (0, _keymap.is)('left', keyCode) ? 'left' : 'right';\n    moveItems(toIndex);\n    if (toIndex <= 0) {\n      announceRef.current.announce((0, _keymap.is)('left', keyCode) && !rtl && (0, _$L[\"default\"])('LEFTMOST') || (0, _keymap.is)('right', keyCode) && rtl && (0, _$L[\"default\"])('RIGHTMOST'));\n    } else if (toIndex >= dataSize - 1) {\n      announceRef.current.announce((0, _keymap.is)('right', keyCode) && !rtl && (0, _$L[\"default\"])('RIGHTMOST') || (0, _keymap.is)('left', keyCode) && rtl && (0, _$L[\"default\"])('LEFTMOST'));\n    }\n  }, [dataSize, moveItems, scrollContainerHandle, scrollContentRef]);\n\n  // Remove an item\n  var removeItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current7 = mutableRef.current,\n      focusedItem = _mutableRef$current7.focusedItem,\n      prevToIndex = _mutableRef$current7.prevToIndex,\n      selectedItem = _mutableRef$current7.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      // rearrangedItems need for the case when removing item while moving selected item\n      var rearrangedItems = mutableRef.current.rearrangedItems;\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      mutableRef.current.hideIndex -= 1;\n      var orders = finalizeOrders();\n      orders.splice(prevToIndex, 1);\n      rearrangedItems.forEach(function (item) {\n        item.style.order -= 1;\n      });\n      finalizeEditing(orders);\n    }\n  }, [finalizeEditing, finalizeOrders]);\n  var hideItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current8 = mutableRef.current,\n      focusedItem = _mutableRef$current8.focusedItem,\n      selectedItem = _mutableRef$current8.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      // rearrangedItems need for the case when hiding item while moving selected item\n      var rearrangedItems = mutableRef.current.rearrangedItems;\n      var targetItemOrder = Number(targetItem.style.order);\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      mutableRef.current.hideIndex -= 1;\n      var orders = finalizeOrders();\n      orders.splice(orders.indexOf(targetItemOrder), 1);\n      orders.push(targetItemOrder);\n      rearrangedItems.forEach(function (item) {\n        item.style.order -= 1;\n      });\n      targetItem.style.order = orders.length;\n      finalizeEditing(orders);\n    }\n  }, [finalizeEditing, finalizeOrders]);\n  var showItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current9 = mutableRef.current,\n      focusedItem = _mutableRef$current9.focusedItem,\n      selectedItem = _mutableRef$current9.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      var targetItemOrder = Number(targetItem.style.order);\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      var orders = Array.from({\n        length: dataSize\n      }, function (_, i) {\n        return i + 1;\n      });\n      orders.splice(targetItemOrder - 1, 1);\n      orders.splice(mutableRef.current.hideIndex, 0, targetItemOrder);\n      mutableRef.current.hideIndex += 1;\n      finalizeEditing(orders);\n    }\n  }, [dataSize, finalizeEditing]);\n  var getNextIndexFromPosition = (0, _react.useCallback)(function (x, tolerance) {\n    var _mutableRef$current10 = mutableRef.current,\n      centeredOffset = _mutableRef$current10.centeredOffset,\n      itemWidth = _mutableRef$current10.itemWidth,\n      prevToIndex = _mutableRef$current10.prevToIndex;\n    var rtl = scrollContainerHandle.current.rtl;\n    var bodyWidth = document.body.getBoundingClientRect().width;\n\n    // Determine toIndex with mouse client x position\n    // Coordinate calculation in RTL locales is not supported in chrome below 85\n    var scrollContentOffset = scrollContentRef.current.scrollLeft * (rtl ? -1 : 1) - centeredOffset;\n    var clientXFromContent = (rtl ? bodyWidth - x : x) + scrollContentOffset;\n    var moveDirection = itemWidth * (prevToIndex + 0.5) < clientXFromContent ? 1 : -1; // 1: To next index , -1: To prev index\n    var moveTolerance = itemWidth * tolerance * moveDirection;\n    return Math.floor((clientXFromContent - moveTolerance) / itemWidth);\n  }, [scrollContainerHandle, scrollContentRef]);\n  var handleMouseMove = (0, _react.useCallback)(function (ev) {\n    var clientX = ev.clientX;\n    mutableRef.current.lastMouseClientX = clientX;\n    if (mutableRef.current.selectedItem && Number(mutableRef.current.selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n      var toIndex = getNextIndexFromPosition(clientX, 0.33);\n      mutableRef.current.lastInputType = 'mouse';\n      moveItems(toIndex);\n    }\n  }, [getNextIndexFromPosition, moveItems]);\n  var handleMouseLeave = (0, _react.useCallback)(function () {\n    var _mutableRef$current11 = mutableRef.current,\n      focusedItem = _mutableRef$current11.focusedItem,\n      itemWidth = _mutableRef$current11.itemWidth,\n      lastInputType = _mutableRef$current11.lastInputType,\n      lastMouseClientX = _mutableRef$current11.lastMouseClientX,\n      selectedItem = _mutableRef$current11.selectedItem;\n    var rtl = scrollContainerHandle.current.rtl;\n    var scrollContentNode = scrollContentRef.current;\n    var scrollContentCenter = scrollContentNode.getBoundingClientRect().width / 2;\n    if (selectedItem || focusedItem) {\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n      if (lastInputType === 'scroll') {\n        var offset = itemWidth * (!rtl ^ !(lastMouseClientX > scrollContentCenter) ? 1 : -1);\n        scrollContainerHandle.current.start({\n          targetX: scrollContentNode.scrollLeft + offset,\n          targetY: 0\n        });\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, scrollContainerHandle, scrollContentRef]);\n  var handleKeyDownCapture = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode,\n      repeat = ev.repeat,\n      target = ev.target;\n    var _mutableRef$current12 = mutableRef.current,\n      focusedItem = _mutableRef$current12.focusedItem,\n      selectedItem = _mutableRef$current12.selectedItem,\n      selectedItemLabel = _mutableRef$current12.selectedItemLabel;\n    var targetItemNode = findItemNode(target);\n    if ((0, _keymap.is)('enter', keyCode) && target.getAttribute('role') !== 'button') {\n      if (!repeat) {\n        if (selectedItem) {\n          var orders = finalizeOrders();\n          finalizeEditing(orders);\n          if (selectItemBy === 'press') {\n            focusItem(target, true);\n          }\n          mutableRef.current.needToPreventEvent = true;\n          setTimeout(function () {\n            announceRef.current.announce(selectedItemLabel + (0, _$L[\"default\"])('move complete'), true);\n          }, completeAnnounceDelay);\n        } else if (selectItemBy === 'press') {\n          startEditing(targetItemNode);\n          mutableRef.current.needToPreventEvent = true;\n        }\n      } else if (repeat && targetItemNode && !mutableRef.current.timer && selectItemBy === 'longPress') {\n        mutableRef.current.timer = setTimeout(function () {\n          startEditing(targetItemNode);\n        }, holdDuration - 300);\n      }\n    } else if ((0, _keymap.is)('left', keyCode) || (0, _keymap.is)('right', keyCode)) {\n      if (selectedItem) {\n        var _mutableRef$current$l;\n        if (((_mutableRef$current$l = mutableRef.current.lastKeyEventTargetElement) === null || _mutableRef$current$l === void 0 ? void 0 : _mutableRef$current$l.getAttribute('role')) !== 'button') {\n          if (Number(selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n            if (repeat) {\n              SpotlightAccelerator.processKey(ev, moveItemsByKeyDown);\n            } else {\n              SpotlightAccelerator.reset();\n              moveItemsByKeyDown(ev);\n            }\n          }\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      } else {\n        var nextTarget = (0, _target.getTargetByDirectionFromElement)((0, _spotlight.getDirection)(keyCode), target);\n\n        // Check if focus leaves scroll container.\n        if (nextTarget && !(0, _container.getContainersForNode)(nextTarget).includes(mutableRef.current.spotlightId) && !repeat) {\n          reset();\n        }\n      }\n    } else if ((0, _keymap.is)('up', keyCode) || (0, _keymap.is)('down', keyCode)) {\n      if (selectedItem || focusedItem) {\n        var _nextTarget = (0, _target.getTargetByDirectionFromElement)((0, _spotlight.getDirection)(keyCode), target);\n\n        // Check if focus leaves scroll container.\n        if (_nextTarget && !(0, _container.getContainersForNode)(_nextTarget).includes(mutableRef.current.spotlightId)) {\n          _spotlight[\"default\"].move((0, _spotlight.getDirection)(keyCode));\n          var _orders = finalizeOrders();\n          finalizeEditing(_orders);\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, findItemNode, focusItem, moveItemsByKeyDown, reset, selectItemBy, startEditing]);\n  var handleKeyUpCapture = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode,\n      target = ev.target;\n    var _mutableRef$current13 = mutableRef.current,\n      selectedItem = _mutableRef$current13.selectedItem,\n      selectedItemLabel = _mutableRef$current13.selectedItemLabel;\n    if ((0, _keymap.is)('cancel', keyCode)) {\n      if (selectedItem) {\n        var orders = finalizeOrders();\n        finalizeEditing(orders);\n        if (selectItemBy === 'press') {\n          focusItem(target, true);\n        }\n        setTimeout(function () {\n          var _announceRef$current;\n          announceRef === null || announceRef === void 0 || (_announceRef$current = announceRef.current) === null || _announceRef$current === void 0 ? void 0 : _announceRef$current.announce(selectedItemLabel + (0, _$L[\"default\"])('move complete'), true);\n        }, completeAnnounceDelay);\n        ev.stopPropagation(); // To prevent onCancel by CancelDecorator\n      }\n    } else {\n      mutableRef.current.lastKeyEventTargetElement = ev.target;\n      if (ev.target.getAttribute('role') === 'button') {\n        return;\n      }\n    }\n    clearTimeout(mutableRef.current.timer);\n    mutableRef.current.timer = null;\n    if (mutableRef.current.needToPreventEvent || mutableRef.current.selectedItem) {\n      ev.preventDefault();\n      mutableRef.current.needToPreventEvent = false;\n    }\n  }, [finalizeEditing, finalizeOrders, focusItem, selectItemBy]);\n  (0, _react.useEffect)(function () {\n    if (mutableRef.current.nextSpotlightRect !== null) {\n      _spotlight[\"default\"].focusNextFromPoint('down', mutableRef.current.nextSpotlightRect);\n      mutableRef.current.nextSpotlightRect = null;\n    }\n  });\n  (0, _react.useEffect)(function () {\n    var _wrapperRef$current;\n    // Calculate the item width once\n    var rtl = scrollContainerHandle.current.rtl;\n    var container = scrollContentRef.current;\n    var item = (_wrapperRef$current = wrapperRef.current) === null || _wrapperRef$current === void 0 ? void 0 : _wrapperRef$current.children[0];\n    if (item && typeof window !== 'undefined') {\n      var _wrapperRef$current2;\n      var bodyWidth = document.body.getBoundingClientRect().width;\n      var neighbor = item.nextElementSibling || item.previousElementSibling;\n      mutableRef.current.itemWidth = Math.abs(item.offsetLeft - (neighbor === null || neighbor === void 0 ? void 0 : neighbor.offsetLeft));\n      mutableRef.current.centeredOffset = rtl ? bodyWidth - (item.getBoundingClientRect().right + container.scrollLeft) : item.getBoundingClientRect().left + container.scrollLeft;\n      (_wrapperRef$current2 = wrapperRef.current) === null || _wrapperRef$current2 === void 0 ? void 0 : _wrapperRef$current2.style.setProperty('--item-width', mutableRef.current.itemWidth + 'px');\n    }\n  }, [centered, dataSize, scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    mutableRef.current.spotlightId = scrollContainerRef.current && scrollContainerRef.current.dataset.spotlightId;\n  }, [scrollContainerRef]);\n  (0, _react.useEffect)(function () {\n    var scrollContainer = scrollContainerRef.current;\n    if (scrollContainer) {\n      scrollContainer.addEventListener('mouseleave', handleMouseLeave);\n    }\n    return function () {\n      if (scrollContainer) {\n        scrollContainer.removeEventListener('mouseleave', handleMouseLeave);\n      }\n    };\n  }, [handleMouseLeave, scrollContainerRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (removeItemFuncRef) {\n      removeItemFuncRef.current = removeItem;\n    }\n  }, [removeItem, removeItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (hideItemFuncRef) {\n      hideItemFuncRef.current = hideItem;\n    }\n  }, [hideItem, hideItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (showItemFuncRef) {\n      showItemFuncRef.current = showItem;\n    }\n  }, [showItem, showItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (focusItemFuncRef) {\n      focusItemFuncRef.current = focusItem;\n    }\n  }, [focusItem, focusItemFuncRef]);\n  (0, _react.useEffect)(function () {\n    // addEventListener to moveItems while scrolled\n    var scrollContentNode = scrollContentRef.current;\n    var handleMoveItemsByScroll = function handleMoveItemsByScroll() {\n      var bodyWidth = document.body.getBoundingClientRect().width;\n      var _mutableRef$current14 = mutableRef.current,\n        lastMouseClientX = _mutableRef$current14.lastMouseClientX,\n        selectedItem = _mutableRef$current14.selectedItem;\n      var _scrollContainerHandl = scrollContainerHandle.current,\n        isHoveringToScroll = _scrollContainerHandl.isHoveringToScroll,\n        rtl = _scrollContainerHandl.rtl;\n      if (selectedItem && mutableRef.current.lastInputType !== 'key' && Number(selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n        mutableRef.current.lastInputType = 'scroll';\n        if (isHoveringToScroll) {\n          var toIndex = getNextIndexFromPosition(lastMouseClientX, 0);\n          moveItems(!rtl ^ !(lastMouseClientX > bodyWidth / 2) ? toIndex + 1 : toIndex - 1);\n        } else {\n          moveItems(getNextIndexFromPosition(lastMouseClientX, 0.33));\n        }\n      }\n    };\n    setTimeout(function () {\n      scrollContentNode.addEventListener('scroll', handleMoveItemsByScroll);\n    }, 400); // Wait for finishing scroll animation when initial selected item is given.\n\n    return function () {\n      scrollContentNode.removeEventListener('scroll', handleMoveItemsByScroll);\n    };\n  }, [getNextIndexFromPosition, moveItems, scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    if (initialSelected !== null && initialSelected !== void 0 && initialSelected.itemIndex) {\n      var _scrollContainerHandl2;\n      (_scrollContainerHandl2 = scrollContainerHandle.current) === null || _scrollContainerHandl2 === void 0 ? void 0 : _scrollContainerHandl2.scrollTo({\n        animate: false,\n        position: {\n          x: initialSelected.scrollLeft\n        }\n      });\n    }\n  }, [initialSelected === null || initialSelected === void 0 ? void 0 : initialSelected.itemIndex, initialSelected === null || initialSelected === void 0 ? void 0 : initialSelected.scrollLeft, scrollContainerHandle]);\n  (0, _react.useLayoutEffect)(function () {\n    if (initialSelected !== null && initialSelected !== void 0 && initialSelected.itemIndex) {\n      var initialSelectedItem = wrapperRef.current.children[initialSelected.itemIndex - 1];\n      if (initialSelectedItem !== null && initialSelectedItem !== void 0 && initialSelectedItem.dataset.index) {\n        mutableRef.current.focusedItem = initialSelectedItem;\n        mutableRef.current.lastMouseClientX = (0, _pointer.getLastPointerPosition)().x;\n        startEditing(initialSelectedItem);\n        (0, _pointer.setPointerMode)(false);\n        _spotlight[\"default\"].focus(initialSelectedItem.children[1]);\n      }\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/(0, _jsxRuntime.jsxs)(TouchableDiv, {\n    holdConfig: holdConfig,\n    className: (0, _classnames[\"default\"])(mergedCss.wrapper, _defineProperty({}, mergedCss.centered, centered)),\n    onClickCapture: handleClickCapture,\n    onHoldStart: handleHoldStart,\n    onKeyDownCapture: handleKeyDownCapture,\n    onKeyUpCapture: handleKeyUpCapture,\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    ref: wrapperRef,\n    children: [children, /*#__PURE__*/(0, _jsxRuntime.jsx)(_AnnounceDecorator.Announce, {\n      ref: announceRef\n    }, \"editable-wrapper-announce\")]\n  });\n};\nexports.EditableWrapper = EditableWrapper;\nEditableWrapper.displayName = 'EditableWrapper';\nEditableWrapper.propTypes = /** @lends sandstone/Scroller.EditableWrapper.prototype */{\n  /**\n   * Enables editing items in the scroller.\n   * You can specify props for editable scroller as an object.\n   * See the datails in {@link sandstone/Scroller.EditableShape|EditableShape}\n   *\n   * @type {sandstone/Scroller.EditableShape}\n   * @public\n   */\n  editable: EditableShape,\n  /**\n   * Obtains a reference to the scroll container handle.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContainerHandle: _propTypes[\"default\"].ref,\n  /**\n   * Obtains a reference to the scroll container node.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContainerRef: _propTypes[\"default\"].ref,\n  /**\n   * Obtains a reference to the scroll content node.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContentRef: _propTypes[\"default\"].ref\n};\nvar _default = EditableWrapper;\nexports[\"default\"] = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","EditableWrapper","EditableShape","_handle","require","_propTypes","_interopRequireDefault","_keymap","_usePublicClassNames","_spotlight","_interopRequireWildcard","_container","_target","_Accelerator","_pointer","_AnnounceDecorator","_Touchable","_classnames","_IString","_propTypes2","_react","_$L","_EditableWrapperModule","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","_toPropertyKey","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","completeAnnounceDelay","TouchableDiv","shape","onComplete","func","isRequired","centered","bool","css","object","focusItemFuncRef","ref","hideItemFuncRef","removeItemFuncRef","selectItemBy","string","showItemFuncRef","SpotlightAccelerator","holdDuration","holdConfig","events","name","time","props","_editable$hideIndex","children","editable","scrollContainerHandle","scrollContainerRef","scrollContentRef","customCss","initialSelected","mergedCss","usePublicClassNames","componentCss","publicClassNames","dataSize","length","wrapperRef","useRef","mutableRef","itemWidth","centeredOffset","spotlightId","focusedItem","selectedItem","selectedItemLabel","rearrangedItems","fromIndex","prevToIndex","hideIndex","nextSpotlightRect","lastMoveDirection","lastMouseClientX","lastInputType","lastKeyEventTargetElement","keyHoldTimerId","needToPreventEvent","lastInputDirection","announceRef","current","reset","useCallback","_mutableRef$current","classList","remove","focused","selected","rearranged","style","setProperty","restrict","finalizeOrders","_mutableRef$current2","orders","Array","from","_","i","selectedOrder","order","changedOrder","forEach","item","rearrangedTransform","push","unshift","splice","apply","Math","min","concat","updateArrowIcon","index","_mutableRef$current$s","_mutableRef$current$s2","toggle","noBefore","noAfter","startEditing","_item$dataset","dataset","hasAttribute","className","includes","_mutableRef$current$f","add","ariaLabel","textContent","announce","finalizeEditing","forwardCustom","findItemNode","node","document","parentNode","focusItem","target","announceDisabled","arguments","itemNode","_mutableRef$current$f2","_mutableRef$current$f3","focusedItemLabel","setTimeout","handleClickCapture","ev","preventDefault","stopPropagation","handleMouseDown","targetItemNode","handleHoldStart","readOutCurrentPosition","neighborItem","_mutableRef$current3","format","addRearrangedItems","_ref","moveDirection","toIndex","rtl","_mutableRef$current4","getNextElement","nextElementSibling","previousElementSibling","sibling","lastRearrangedItem","start","end","_sibling","removeRearrangedItems","numToRemove","toItem","_toItem","pop","moveItems","_mutableRef$current5","offset","sign","moveItemsByKeyDown","keyCode","container","_mutableRef$current6","is","scrollLeft","itemLeft","left","offsetLeft","clientWidth","targetX","targetY","removeItem","_mutableRef$current7","targetItem","targetItemRect","getBoundingClientRect","x","right","y","top","hideItem","_mutableRef$current8","targetItemOrder","indexOf","showItem","_mutableRef$current9","getNextIndexFromPosition","tolerance","_mutableRef$current10","bodyWidth","body","width","scrollContentOffset","clientXFromContent","moveTolerance","floor","handleMouseMove","clientX","handleMouseLeave","_mutableRef$current11","scrollContentNode","scrollContentCenter","handleKeyDownCapture","repeat","_mutableRef$current12","getAttribute","timer","_mutableRef$current$l","processKey","nextTarget","getTargetByDirectionFromElement","getDirection","getContainersForNode","_nextTarget","move","_orders","handleKeyUpCapture","_mutableRef$current13","_announceRef$current","clearTimeout","useEffect","focusNextFromPoint","_wrapperRef$current","window","_wrapperRef$current2","neighbor","abs","scrollContainer","addEventListener","removeEventListener","useLayoutEffect","handleMoveItemsByScroll","_mutableRef$current14","_scrollContainerHandl","isHoveringToScroll","itemIndex","_scrollContainerHandl2","scrollTo","animate","position","initialSelectedItem","getLastPointerPosition","setPointerMode","focus","jsxs","wrapper","onClickCapture","onHoldStart","onKeyDownCapture","onKeyUpCapture","onMouseDown","onMouseMove","jsx","Announce","displayName","propTypes","_default"],"sources":["/home/islab/LGEE/project/frontend/node_modules/@enact/sandstone/Scroller/EditableWrapper.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.EditableWrapper = exports.EditableShape = void 0;\nvar _handle = require(\"@enact/core/handle\");\nvar _propTypes = _interopRequireDefault(require(\"@enact/core/internal/prop-types\"));\nvar _keymap = require(\"@enact/core/keymap\");\nvar _usePublicClassNames = require(\"@enact/core/usePublicClassNames\");\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\nvar _container = require(\"@enact/spotlight/src/container\");\nvar _target = require(\"@enact/spotlight/src/target\");\nvar _Accelerator = _interopRequireDefault(require(\"@enact/spotlight/Accelerator\"));\nvar _pointer = require(\"@enact/spotlight/src/pointer\");\nvar _AnnounceDecorator = require(\"@enact/ui/AnnounceDecorator\");\nvar _Touchable = _interopRequireDefault(require(\"@enact/ui/Touchable\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _IString = _interopRequireDefault(require(\"ilib/lib/IString\"));\nvar _propTypes2 = _interopRequireDefault(require(\"prop-types\"));\nvar _react = require(\"react\");\nvar _$L = _interopRequireDefault(require(\"../internal/$L\"));\nvar _EditableWrapperModule = _interopRequireDefault(require(\"./EditableWrapper.module.css\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar completeAnnounceDelay = 300; // An arbitrary delay at a level that is not ignored by the new focus element\nvar TouchableDiv = (0, _Touchable[\"default\"])('div');\n\n/**\n * The shape for editable of {@link sandstone/Scroller|Scroller}.\n *\n * @typedef {Object} EditableShape\n * @memberof sandstone/Scroller\n * @property {Function} onComplete The callback function called when editing is finished.\n *  It has an event object contains `orders` array which app can use for repopulate items.\n * @property {Boolean} [centered] Centers the contents of the scroller.\n * @property {Object} [css] Customizes the component by mapping the supplied collection of CSS class names to the\n *  corresponding internal elements and states of this component.\n *  The following classes are supported:\n *\n * * `wrapper` - The content wrapper component class\n * * `selected` - The selected item class\n * * `focused` - The focused item class\n * @property {Function|Object} [focusItemFuncRef] Obtains a reference to `focusItem` function.\n *  If you would like to use `focused` CSS class to an item, you can get the reference to `focusItem` function via `useRef`.\n * `focusItem` function need to be called with an item node when an item is focused.\n * @property {Function|Object} [hideItemFuncRef] Obtains a reference to `hideItem` function.\n *  If you would like to hide an item, you can get the reference to `hideItem` function via `useRef`.\n * @property {Function|Object} [removeItemFuncRef] Obtains a reference to `removeItem` function.\n *  If you would like to remove an item, you can get the reference to `removeItem` function via `useRef`.\n * @property {string} [selectItemBy] Decides how to start editing items.\n *  It can be either `'press'` or `'longPress'`. If unset, it defaults to `'longPress'`.\n * @property {Function|Object} [showItemFuncRef] Obtains a reference to `showItem` function.\n *  If you would like to show an item, you can get the reference to `showItem` function via `useRef`.\n * @public\n */\nvar EditableShape = _propTypes2[\"default\"].shape({\n  onComplete: _propTypes2[\"default\"].func.isRequired,\n  centered: _propTypes2[\"default\"].bool,\n  css: _propTypes2[\"default\"].object,\n  focusItemFuncRef: _propTypes[\"default\"].ref,\n  hideItemFuncRef: _propTypes[\"default\"].ref,\n  removeItemFuncRef: _propTypes[\"default\"].ref,\n  selectItemBy: _propTypes2[\"default\"].string,\n  showItemFuncRef: _propTypes[\"default\"].ref\n});\nexports.EditableShape = EditableShape;\nvar SpotlightAccelerator = new _Accelerator[\"default\"]([5, 4]);\nvar holdDuration = 500;\nvar holdConfig = {\n  events: [{\n    name: 'hold',\n    time: holdDuration\n  }]\n};\n\n/**\n * A Sandstone-styled EditableWrapper.\n *\n * @class EditableWrapper\n * @memberof sandstone/Scroller\n * @ui\n * @public\n */\nvar EditableWrapper = function EditableWrapper(props) {\n  var _editable$hideIndex;\n  var children = props.children,\n    editable = props.editable,\n    scrollContainerHandle = props.scrollContainerHandle,\n    scrollContainerRef = props.scrollContainerRef,\n    scrollContentRef = props.scrollContentRef;\n  var centered = (editable === null || editable === void 0 ? void 0 : editable.centered) != null ? editable.centered : true;\n  var selectItemBy = (editable === null || editable === void 0 ? void 0 : editable.selectItemBy) || 'longPress';\n  var customCss = (editable === null || editable === void 0 ? void 0 : editable.css) || {};\n  var removeItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.removeItemFuncRef;\n  var hideItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.hideItemFuncRef;\n  var showItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.showItemFuncRef;\n  var focusItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.focusItemFuncRef;\n  var initialSelected = editable === null || editable === void 0 ? void 0 : editable.initialSelected;\n  var mergedCss = (0, _usePublicClassNames.usePublicClassNames)({\n    componentCss: _EditableWrapperModule[\"default\"],\n    customCss: customCss,\n    publicClassNames: true\n  });\n  var dataSize = children === null || children === void 0 ? void 0 : children.length;\n\n  // Mutable value\n  var wrapperRef = (0, _react.useRef)();\n  var mutableRef = (0, _react.useRef)({\n    // Constants\n    itemWidth: null,\n    centeredOffset: 0,\n    spotlightId: null,\n    // DOM elements\n    focusedItem: null,\n    selectedItem: null,\n    selectedItemLabel: '',\n    rearrangedItems: [],\n    // Indices\n    fromIndex: null,\n    prevToIndex: null,\n    hideIndex: null,\n    // Position for restoring focus after removing item\n    nextSpotlightRect: null,\n    // Last move direction\n    lastMoveDirection: null,\n    // Last mouse position\n    lastMouseClientX: null,\n    // Last InputType which moves Items\n    lastInputType: null,\n    lastKeyEventTargetElement: null,\n    // Timer for holding key input\n    keyHoldTimerId: null,\n    // Flag for prevent event propagation\n    needToPreventEvent: null,\n    lastInputDirection: null\n  });\n  var announceRef = (0, _react.useRef)({});\n  mutableRef.current.hideIndex = (_editable$hideIndex = editable === null || editable === void 0 ? void 0 : editable.hideIndex) !== null && _editable$hideIndex !== void 0 ? _editable$hideIndex : dataSize;\n\n  // Functions\n\n  // Reset values\n  var reset = (0, _react.useCallback)(function () {\n    var _mutableRef$current = mutableRef.current,\n      focusedItem = _mutableRef$current.focusedItem,\n      selectedItem = _mutableRef$current.selectedItem,\n      spotlightId = _mutableRef$current.spotlightId;\n    focusedItem === null || focusedItem === void 0 ? void 0 : focusedItem.classList.remove(customCss.focused);\n    selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.classList.remove(_EditableWrapperModule[\"default\"].selected, customCss.selected, _EditableWrapperModule[\"default\"].rearranged);\n    mutableRef.current.focusedItem = null;\n    mutableRef.current.selectedItem = null;\n    mutableRef.current.selectedItemLabel = '';\n    mutableRef.current.lastMoveDirection = null;\n    mutableRef.current.prevToIndex = null;\n    wrapperRef.current.style.setProperty('--selected-item-offset', '0px');\n    _spotlight[\"default\"].set(spotlightId, {\n      restrict: 'self-first'\n    });\n  }, [customCss.focused, customCss.selected]);\n\n  // Finalize the order\n  var finalizeOrders = (0, _react.useCallback)(function () {\n    var _mutableRef$current2 = mutableRef.current,\n      fromIndex = _mutableRef$current2.fromIndex,\n      lastMoveDirection = _mutableRef$current2.lastMoveDirection,\n      prevToIndex = _mutableRef$current2.prevToIndex,\n      rearrangedItems = _mutableRef$current2.rearrangedItems,\n      selectedItem = _mutableRef$current2.selectedItem;\n    var orders = Array.from({\n      length: dataSize\n    }, function (_, i) {\n      return i + 1;\n    });\n    if (rearrangedItems.length > 0) {\n      var selectedOrder = selectedItem.style.order;\n      var changedOrder = [];\n      rearrangedItems.forEach(function (item) {\n        var order = Number(item.style.order);\n        selectedOrder = order;\n        item.style.order = order - lastMoveDirection;\n        item.classList.remove(_EditableWrapperModule[\"default\"].rearrangedTransform, _EditableWrapperModule[\"default\"].rearranged);\n        if (lastMoveDirection > 0) {\n          changedOrder.push(order);\n        } else {\n          changedOrder.unshift(order);\n        }\n      });\n      if (lastMoveDirection > 0) {\n        changedOrder.push(Number(selectedItem.style.order));\n      } else {\n        changedOrder.unshift(Number(selectedItem.style.order));\n      }\n      mutableRef.current.rearrangedItems = [];\n      selectedItem.style.order = selectedOrder;\n\n      // Create reordered array\n      orders.splice.apply(orders, [Math.min(fromIndex, prevToIndex), changedOrder.length].concat(changedOrder));\n    }\n    return orders;\n  }, [dataSize]);\n  var updateArrowIcon = (0, _react.useCallback)(function (index) {\n    var _mutableRef$current$s, _mutableRef$current$s2;\n    (_mutableRef$current$s = mutableRef.current.selectedItem) === null || _mutableRef$current$s === void 0 ? void 0 : _mutableRef$current$s.classList.toggle(customCss.noBefore, index === 0);\n    (_mutableRef$current$s2 = mutableRef.current.selectedItem) === null || _mutableRef$current$s2 === void 0 ? void 0 : _mutableRef$current$s2.classList.toggle(customCss.noAfter, index === mutableRef.current.hideIndex - 1);\n  }, [customCss.noBefore, customCss.noAfter]);\n  var startEditing = (0, _react.useCallback)(function (item) {\n    var _item$dataset;\n    if (item !== null && item !== void 0 && (_item$dataset = item.dataset) !== null && _item$dataset !== void 0 && _item$dataset.index && (!item.hasAttribute('disabled') || item.className.includes('hidden'))) {\n      var _mutableRef$current$f;\n      item.classList.add(_EditableWrapperModule[\"default\"].selected, customCss.selected);\n      mutableRef.current.selectedItem = item;\n      (_mutableRef$current$f = mutableRef.current.focusedItem) === null || _mutableRef$current$f === void 0 ? void 0 : _mutableRef$current$f.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = null;\n      mutableRef.current.selectedItemLabel = (item.ariaLabel || item.textContent) + ' ';\n      mutableRef.current.fromIndex = Number(item.style.order) - 1;\n      mutableRef.current.prevToIndex = mutableRef.current.fromIndex;\n      updateArrowIcon(mutableRef.current.fromIndex);\n      announceRef.current.announce(mutableRef.current.selectedItemLabel + (0, _$L[\"default\"])('Press left or right button to move or press up button for other actions'));\n    }\n  }, [customCss.focused, customCss.selected, updateArrowIcon]);\n  var finalizeEditing = (0, _react.useCallback)(function (orders) {\n    (0, _handle.forwardCustom)('onComplete', function () {\n      return {\n        orders: orders,\n        hideIndex: mutableRef.current.hideIndex\n      };\n    })(null, editable);\n    reset();\n  }, [editable, reset]);\n  var findItemNode = (0, _react.useCallback)(function (node) {\n    for (var current = node; current !== scrollContentRef.current && current !== document; current = current.parentNode) {\n      if (current.dataset.index) {\n        return current;\n      }\n    }\n    return null;\n  }, [scrollContentRef]);\n  var focusItem = (0, _react.useCallback)(function (target) {\n    var announceDisabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var itemNode = findItemNode(target);\n    if (itemNode && !mutableRef.current.selectedItem) {\n      var _mutableRef$current$f2, _mutableRef$current$f3;\n      (_mutableRef$current$f2 = mutableRef.current.focusedItem) === null || _mutableRef$current$f2 === void 0 ? void 0 : _mutableRef$current$f2.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = itemNode;\n      (_mutableRef$current$f3 = mutableRef.current.focusedItem) === null || _mutableRef$current$f3 === void 0 ? void 0 : _mutableRef$current$f3.classList.add(customCss.focused);\n      mutableRef.current.prevToIndex = Number(itemNode.style.order) - 1;\n      var focusedItemLabel = (itemNode.ariaLabel || itemNode.textContent) + ' ';\n      if (!announceDisabled && (!itemNode.hasAttribute('disabled') || itemNode.className.includes('hidden'))) {\n        setTimeout(function () {\n          announceRef.current.announce(focusedItemLabel + (0, _$L[\"default\"])('Press OK button to move or press up button for other actions'));\n        }, completeAnnounceDelay);\n      }\n    }\n  }, [customCss.focused, findItemNode]);\n  var handleClickCapture = (0, _react.useCallback)(function (ev) {\n    if (ev.target.className.includes('Button')) {\n      return;\n    }\n    // Consume the event to prevent Item behavior\n    if (mutableRef.current.selectedItem || mutableRef.current.needToPreventEvent) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      mutableRef.current.needToPreventEvent = false;\n    }\n  }, []);\n  var handleMouseDown = (0, _react.useCallback)(function (ev) {\n    if (ev.target.className.includes('Button')) {\n      return;\n    }\n    if (mutableRef.current.selectedItem) {\n      // Finalize orders and forward `onComplete` event\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n      if (selectItemBy === 'press') {\n        focusItem(ev.target, true);\n      }\n      mutableRef.current.needToPreventEvent = true;\n    } else {\n      var targetItemNode = findItemNode(ev.target);\n      if (selectItemBy === 'press') {\n        if (targetItemNode && targetItemNode.dataset.index) {\n          // Start editing by adding selected transition to selected item\n          mutableRef.current.targetItemNode = targetItemNode;\n          startEditing(targetItemNode);\n        }\n        mutableRef.current.needToPreventEvent = true;\n      } else {\n        mutableRef.current.targetItemNode = targetItemNode;\n        mutableRef.current.needToPreventEvent = false;\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, findItemNode, focusItem, selectItemBy, startEditing]);\n  var handleHoldStart = (0, _react.useCallback)(function () {\n    var targetItemNode = mutableRef.current.targetItemNode;\n    if (targetItemNode && targetItemNode.dataset.index && selectItemBy === 'longPress') {\n      // Start editing by adding selected transition to selected item\n      startEditing(targetItemNode);\n    }\n  }, [selectItemBy, startEditing]);\n  var readOutCurrentPosition = (0, _react.useCallback)(function (neighborItem) {\n    var _mutableRef$current3 = mutableRef.current,\n      lastInputDirection = _mutableRef$current3.lastInputDirection,\n      lastInputType = _mutableRef$current3.lastInputType,\n      selectedItemLabel = _mutableRef$current3.selectedItemLabel;\n    if (lastInputType === 'key') {\n      if (lastInputDirection === 'left') {\n        announceRef.current.announce(new _IString[\"default\"]((0, _$L[\"default\"])('{selectedItem} moved to the left of {neighborItem}')).format({\n          selectedItem: selectedItemLabel,\n          neighborItem: neighborItem\n        }), true);\n      } else {\n        announceRef.current.announce(new _IString[\"default\"]((0, _$L[\"default\"])('{selectedItem} moved to the right of {neighborItem}')).format({\n          selectedItem: selectedItemLabel,\n          neighborItem: neighborItem\n        }), true);\n      }\n    }\n  }, []);\n\n  // Add rearranged items\n  var addRearrangedItems = (0, _react.useCallback)(function (_ref) {\n    var moveDirection = _ref.moveDirection,\n      toIndex = _ref.toIndex;\n    // Set the moveDirection to css variable\n    var rtl = scrollContainerHandle.current.rtl;\n    wrapperRef.current.style.setProperty('--move-direction', moveDirection * (rtl ? -1 : 1));\n    var _mutableRef$current4 = mutableRef.current,\n      fromIndex = _mutableRef$current4.fromIndex,\n      rearrangedItems = _mutableRef$current4.rearrangedItems,\n      selectedItem = _mutableRef$current4.selectedItem;\n    var getNextElement = function getNextElement(item) {\n      return moveDirection > 0 ? item.nextElementSibling : item.previousElementSibling;\n    };\n    var sibling = getNextElement(selectedItem);\n    var lastRearrangedItem;\n    var start = moveDirection > 0 ? toIndex : fromIndex;\n    var end = moveDirection > 0 ? fromIndex : toIndex;\n    while (start > end && sibling) {\n      var _sibling;\n      (_sibling = sibling) === null || _sibling === void 0 ? void 0 : _sibling.classList.add(_EditableWrapperModule[\"default\"].rearranged, _EditableWrapperModule[\"default\"].rearrangedTransform);\n      if (!rearrangedItems.includes(sibling)) {\n        rearrangedItems.push(sibling);\n      }\n      lastRearrangedItem = sibling;\n      sibling = getNextElement(sibling);\n      start--;\n    }\n    if (lastRearrangedItem) {\n      readOutCurrentPosition(lastRearrangedItem.ariaLabel || lastRearrangedItem.textContent);\n    }\n    mutableRef.current.lastMoveDirection = moveDirection;\n  }, [readOutCurrentPosition, scrollContainerHandle]);\n  var removeRearrangedItems = (0, _react.useCallback)(function (numToRemove) {\n    var rearrangedItems = mutableRef.current.rearrangedItems;\n    var toItem = null;\n    if (rearrangedItems.length > 0) {\n      for (var i = 0; i < numToRemove; i++) {\n        var _toItem;\n        toItem = rearrangedItems.pop();\n        (_toItem = toItem) === null || _toItem === void 0 ? void 0 : _toItem.classList.remove(_EditableWrapperModule[\"default\"].rearrangedTransform);\n      }\n    }\n    if (toItem) {\n      readOutCurrentPosition(toItem.ariaLabel || toItem.textContent);\n    }\n  }, [readOutCurrentPosition]);\n\n  // Move items\n  var moveItems = (0, _react.useCallback)(function (toIndex) {\n    var selectedItem = mutableRef.current.selectedItem;\n    var rtl = scrollContainerHandle.current.rtl;\n    if (selectedItem) {\n      // Bail out when index is out of scope\n      if (toIndex < mutableRef.current.hideIndex && toIndex >= 0) {\n        var _mutableRef$current5 = mutableRef.current,\n          fromIndex = _mutableRef$current5.fromIndex,\n          itemWidth = _mutableRef$current5.itemWidth,\n          lastMoveDirection = _mutableRef$current5.lastMoveDirection,\n          prevToIndex = _mutableRef$current5.prevToIndex,\n          rearrangedItems = _mutableRef$current5.rearrangedItems;\n\n        // Set the selected item's offset to css variable\n        var offset = (toIndex - fromIndex) * itemWidth;\n        wrapperRef.current.style.setProperty('--selected-item-offset', offset * (rtl ? -1 : 1) + 'px');\n\n        // If the current toIndex is new,\n        if (toIndex !== prevToIndex) {\n          // Determine the direction of move from the latest from index\n          var moveDirection = Math.sign(toIndex - prevToIndex);\n          // If the direction is changed and there are rearranged items, we remove them first.\n          if (lastMoveDirection && moveDirection !== lastMoveDirection && rearrangedItems.length > 0) {\n            var numToRemove = moveDirection > 0 ? toIndex - prevToIndex : prevToIndex - toIndex;\n            removeRearrangedItems(numToRemove);\n\n            // When there's jump, meaning, numToRemove is bigger than 0, we need to add an item\n            if (numToRemove > rearrangedItems.length) {\n              addRearrangedItems({\n                moveDirection: moveDirection,\n                toIndex: toIndex\n              });\n            }\n          } else {\n            addRearrangedItems({\n              moveDirection: moveDirection,\n              toIndex: toIndex\n            });\n          }\n          mutableRef.current.prevToIndex = toIndex;\n        }\n        updateArrowIcon(toIndex);\n      }\n    }\n  }, [addRearrangedItems, removeRearrangedItems, scrollContainerHandle, updateArrowIcon]);\n  var moveItemsByKeyDown = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode;\n    var container = scrollContentRef.current;\n    var _mutableRef$current6 = mutableRef.current,\n      itemWidth = _mutableRef$current6.itemWidth,\n      prevToIndex = _mutableRef$current6.prevToIndex;\n    var rtl = scrollContainerHandle.current.rtl;\n    var toIndex = !rtl ^ !(0, _keymap.is)('left', keyCode) ? prevToIndex - 1 : prevToIndex + 1;\n    var scrollLeft = container.scrollLeft * (rtl ? -1 : 1);\n    var itemLeft = toIndex * itemWidth - scrollLeft;\n    var left;\n    if (itemLeft > container.offsetLeft + container.clientWidth - itemWidth) {\n      left = itemLeft - (container.clientWidth - itemWidth) + scrollLeft;\n    } else if (itemLeft < 0) {\n      left = scrollLeft + itemLeft;\n    }\n    if (left != null) {\n      /* avoid null or undefined */\n      scrollContainerHandle.current.start({\n        targetX: left,\n        targetY: 0\n      });\n    }\n    mutableRef.current.lastInputType = 'key';\n    mutableRef.current.lastInputDirection = (0, _keymap.is)('left', keyCode) ? 'left' : 'right';\n    moveItems(toIndex);\n    if (toIndex <= 0) {\n      announceRef.current.announce((0, _keymap.is)('left', keyCode) && !rtl && (0, _$L[\"default\"])('LEFTMOST') || (0, _keymap.is)('right', keyCode) && rtl && (0, _$L[\"default\"])('RIGHTMOST'));\n    } else if (toIndex >= dataSize - 1) {\n      announceRef.current.announce((0, _keymap.is)('right', keyCode) && !rtl && (0, _$L[\"default\"])('RIGHTMOST') || (0, _keymap.is)('left', keyCode) && rtl && (0, _$L[\"default\"])('LEFTMOST'));\n    }\n  }, [dataSize, moveItems, scrollContainerHandle, scrollContentRef]);\n\n  // Remove an item\n  var removeItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current7 = mutableRef.current,\n      focusedItem = _mutableRef$current7.focusedItem,\n      prevToIndex = _mutableRef$current7.prevToIndex,\n      selectedItem = _mutableRef$current7.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      // rearrangedItems need for the case when removing item while moving selected item\n      var rearrangedItems = mutableRef.current.rearrangedItems;\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      mutableRef.current.hideIndex -= 1;\n      var orders = finalizeOrders();\n      orders.splice(prevToIndex, 1);\n      rearrangedItems.forEach(function (item) {\n        item.style.order -= 1;\n      });\n      finalizeEditing(orders);\n    }\n  }, [finalizeEditing, finalizeOrders]);\n  var hideItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current8 = mutableRef.current,\n      focusedItem = _mutableRef$current8.focusedItem,\n      selectedItem = _mutableRef$current8.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      // rearrangedItems need for the case when hiding item while moving selected item\n      var rearrangedItems = mutableRef.current.rearrangedItems;\n      var targetItemOrder = Number(targetItem.style.order);\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      mutableRef.current.hideIndex -= 1;\n      var orders = finalizeOrders();\n      orders.splice(orders.indexOf(targetItemOrder), 1);\n      orders.push(targetItemOrder);\n      rearrangedItems.forEach(function (item) {\n        item.style.order -= 1;\n      });\n      targetItem.style.order = orders.length;\n      finalizeEditing(orders);\n    }\n  }, [finalizeEditing, finalizeOrders]);\n  var showItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current9 = mutableRef.current,\n      focusedItem = _mutableRef$current9.focusedItem,\n      selectedItem = _mutableRef$current9.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      var targetItemOrder = Number(targetItem.style.order);\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      var orders = Array.from({\n        length: dataSize\n      }, function (_, i) {\n        return i + 1;\n      });\n      orders.splice(targetItemOrder - 1, 1);\n      orders.splice(mutableRef.current.hideIndex, 0, targetItemOrder);\n      mutableRef.current.hideIndex += 1;\n      finalizeEditing(orders);\n    }\n  }, [dataSize, finalizeEditing]);\n  var getNextIndexFromPosition = (0, _react.useCallback)(function (x, tolerance) {\n    var _mutableRef$current10 = mutableRef.current,\n      centeredOffset = _mutableRef$current10.centeredOffset,\n      itemWidth = _mutableRef$current10.itemWidth,\n      prevToIndex = _mutableRef$current10.prevToIndex;\n    var rtl = scrollContainerHandle.current.rtl;\n    var bodyWidth = document.body.getBoundingClientRect().width;\n\n    // Determine toIndex with mouse client x position\n    // Coordinate calculation in RTL locales is not supported in chrome below 85\n    var scrollContentOffset = scrollContentRef.current.scrollLeft * (rtl ? -1 : 1) - centeredOffset;\n    var clientXFromContent = (rtl ? bodyWidth - x : x) + scrollContentOffset;\n    var moveDirection = itemWidth * (prevToIndex + 0.5) < clientXFromContent ? 1 : -1; // 1: To next index , -1: To prev index\n    var moveTolerance = itemWidth * tolerance * moveDirection;\n    return Math.floor((clientXFromContent - moveTolerance) / itemWidth);\n  }, [scrollContainerHandle, scrollContentRef]);\n  var handleMouseMove = (0, _react.useCallback)(function (ev) {\n    var clientX = ev.clientX;\n    mutableRef.current.lastMouseClientX = clientX;\n    if (mutableRef.current.selectedItem && Number(mutableRef.current.selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n      var toIndex = getNextIndexFromPosition(clientX, 0.33);\n      mutableRef.current.lastInputType = 'mouse';\n      moveItems(toIndex);\n    }\n  }, [getNextIndexFromPosition, moveItems]);\n  var handleMouseLeave = (0, _react.useCallback)(function () {\n    var _mutableRef$current11 = mutableRef.current,\n      focusedItem = _mutableRef$current11.focusedItem,\n      itemWidth = _mutableRef$current11.itemWidth,\n      lastInputType = _mutableRef$current11.lastInputType,\n      lastMouseClientX = _mutableRef$current11.lastMouseClientX,\n      selectedItem = _mutableRef$current11.selectedItem;\n    var rtl = scrollContainerHandle.current.rtl;\n    var scrollContentNode = scrollContentRef.current;\n    var scrollContentCenter = scrollContentNode.getBoundingClientRect().width / 2;\n    if (selectedItem || focusedItem) {\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n      if (lastInputType === 'scroll') {\n        var offset = itemWidth * (!rtl ^ !(lastMouseClientX > scrollContentCenter) ? 1 : -1);\n        scrollContainerHandle.current.start({\n          targetX: scrollContentNode.scrollLeft + offset,\n          targetY: 0\n        });\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, scrollContainerHandle, scrollContentRef]);\n  var handleKeyDownCapture = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode,\n      repeat = ev.repeat,\n      target = ev.target;\n    var _mutableRef$current12 = mutableRef.current,\n      focusedItem = _mutableRef$current12.focusedItem,\n      selectedItem = _mutableRef$current12.selectedItem,\n      selectedItemLabel = _mutableRef$current12.selectedItemLabel;\n    var targetItemNode = findItemNode(target);\n    if ((0, _keymap.is)('enter', keyCode) && target.getAttribute('role') !== 'button') {\n      if (!repeat) {\n        if (selectedItem) {\n          var orders = finalizeOrders();\n          finalizeEditing(orders);\n          if (selectItemBy === 'press') {\n            focusItem(target, true);\n          }\n          mutableRef.current.needToPreventEvent = true;\n          setTimeout(function () {\n            announceRef.current.announce(selectedItemLabel + (0, _$L[\"default\"])('move complete'), true);\n          }, completeAnnounceDelay);\n        } else if (selectItemBy === 'press') {\n          startEditing(targetItemNode);\n          mutableRef.current.needToPreventEvent = true;\n        }\n      } else if (repeat && targetItemNode && !mutableRef.current.timer && selectItemBy === 'longPress') {\n        mutableRef.current.timer = setTimeout(function () {\n          startEditing(targetItemNode);\n        }, holdDuration - 300);\n      }\n    } else if ((0, _keymap.is)('left', keyCode) || (0, _keymap.is)('right', keyCode)) {\n      if (selectedItem) {\n        var _mutableRef$current$l;\n        if (((_mutableRef$current$l = mutableRef.current.lastKeyEventTargetElement) === null || _mutableRef$current$l === void 0 ? void 0 : _mutableRef$current$l.getAttribute('role')) !== 'button') {\n          if (Number(selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n            if (repeat) {\n              SpotlightAccelerator.processKey(ev, moveItemsByKeyDown);\n            } else {\n              SpotlightAccelerator.reset();\n              moveItemsByKeyDown(ev);\n            }\n          }\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      } else {\n        var nextTarget = (0, _target.getTargetByDirectionFromElement)((0, _spotlight.getDirection)(keyCode), target);\n\n        // Check if focus leaves scroll container.\n        if (nextTarget && !(0, _container.getContainersForNode)(nextTarget).includes(mutableRef.current.spotlightId) && !repeat) {\n          reset();\n        }\n      }\n    } else if ((0, _keymap.is)('up', keyCode) || (0, _keymap.is)('down', keyCode)) {\n      if (selectedItem || focusedItem) {\n        var _nextTarget = (0, _target.getTargetByDirectionFromElement)((0, _spotlight.getDirection)(keyCode), target);\n\n        // Check if focus leaves scroll container.\n        if (_nextTarget && !(0, _container.getContainersForNode)(_nextTarget).includes(mutableRef.current.spotlightId)) {\n          _spotlight[\"default\"].move((0, _spotlight.getDirection)(keyCode));\n          var _orders = finalizeOrders();\n          finalizeEditing(_orders);\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, findItemNode, focusItem, moveItemsByKeyDown, reset, selectItemBy, startEditing]);\n  var handleKeyUpCapture = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode,\n      target = ev.target;\n    var _mutableRef$current13 = mutableRef.current,\n      selectedItem = _mutableRef$current13.selectedItem,\n      selectedItemLabel = _mutableRef$current13.selectedItemLabel;\n    if ((0, _keymap.is)('cancel', keyCode)) {\n      if (selectedItem) {\n        var orders = finalizeOrders();\n        finalizeEditing(orders);\n        if (selectItemBy === 'press') {\n          focusItem(target, true);\n        }\n        setTimeout(function () {\n          var _announceRef$current;\n          announceRef === null || announceRef === void 0 || (_announceRef$current = announceRef.current) === null || _announceRef$current === void 0 ? void 0 : _announceRef$current.announce(selectedItemLabel + (0, _$L[\"default\"])('move complete'), true);\n        }, completeAnnounceDelay);\n        ev.stopPropagation(); // To prevent onCancel by CancelDecorator\n      }\n    } else {\n      mutableRef.current.lastKeyEventTargetElement = ev.target;\n      if (ev.target.getAttribute('role') === 'button') {\n        return;\n      }\n    }\n    clearTimeout(mutableRef.current.timer);\n    mutableRef.current.timer = null;\n    if (mutableRef.current.needToPreventEvent || mutableRef.current.selectedItem) {\n      ev.preventDefault();\n      mutableRef.current.needToPreventEvent = false;\n    }\n  }, [finalizeEditing, finalizeOrders, focusItem, selectItemBy]);\n  (0, _react.useEffect)(function () {\n    if (mutableRef.current.nextSpotlightRect !== null) {\n      _spotlight[\"default\"].focusNextFromPoint('down', mutableRef.current.nextSpotlightRect);\n      mutableRef.current.nextSpotlightRect = null;\n    }\n  });\n  (0, _react.useEffect)(function () {\n    var _wrapperRef$current;\n    // Calculate the item width once\n    var rtl = scrollContainerHandle.current.rtl;\n    var container = scrollContentRef.current;\n    var item = (_wrapperRef$current = wrapperRef.current) === null || _wrapperRef$current === void 0 ? void 0 : _wrapperRef$current.children[0];\n    if (item && typeof window !== 'undefined') {\n      var _wrapperRef$current2;\n      var bodyWidth = document.body.getBoundingClientRect().width;\n      var neighbor = item.nextElementSibling || item.previousElementSibling;\n      mutableRef.current.itemWidth = Math.abs(item.offsetLeft - (neighbor === null || neighbor === void 0 ? void 0 : neighbor.offsetLeft));\n      mutableRef.current.centeredOffset = rtl ? bodyWidth - (item.getBoundingClientRect().right + container.scrollLeft) : item.getBoundingClientRect().left + container.scrollLeft;\n      (_wrapperRef$current2 = wrapperRef.current) === null || _wrapperRef$current2 === void 0 ? void 0 : _wrapperRef$current2.style.setProperty('--item-width', mutableRef.current.itemWidth + 'px');\n    }\n  }, [centered, dataSize, scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    mutableRef.current.spotlightId = scrollContainerRef.current && scrollContainerRef.current.dataset.spotlightId;\n  }, [scrollContainerRef]);\n  (0, _react.useEffect)(function () {\n    var scrollContainer = scrollContainerRef.current;\n    if (scrollContainer) {\n      scrollContainer.addEventListener('mouseleave', handleMouseLeave);\n    }\n    return function () {\n      if (scrollContainer) {\n        scrollContainer.removeEventListener('mouseleave', handleMouseLeave);\n      }\n    };\n  }, [handleMouseLeave, scrollContainerRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (removeItemFuncRef) {\n      removeItemFuncRef.current = removeItem;\n    }\n  }, [removeItem, removeItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (hideItemFuncRef) {\n      hideItemFuncRef.current = hideItem;\n    }\n  }, [hideItem, hideItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (showItemFuncRef) {\n      showItemFuncRef.current = showItem;\n    }\n  }, [showItem, showItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (focusItemFuncRef) {\n      focusItemFuncRef.current = focusItem;\n    }\n  }, [focusItem, focusItemFuncRef]);\n  (0, _react.useEffect)(function () {\n    // addEventListener to moveItems while scrolled\n    var scrollContentNode = scrollContentRef.current;\n    var handleMoveItemsByScroll = function handleMoveItemsByScroll() {\n      var bodyWidth = document.body.getBoundingClientRect().width;\n      var _mutableRef$current14 = mutableRef.current,\n        lastMouseClientX = _mutableRef$current14.lastMouseClientX,\n        selectedItem = _mutableRef$current14.selectedItem;\n      var _scrollContainerHandl = scrollContainerHandle.current,\n        isHoveringToScroll = _scrollContainerHandl.isHoveringToScroll,\n        rtl = _scrollContainerHandl.rtl;\n      if (selectedItem && mutableRef.current.lastInputType !== 'key' && Number(selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n        mutableRef.current.lastInputType = 'scroll';\n        if (isHoveringToScroll) {\n          var toIndex = getNextIndexFromPosition(lastMouseClientX, 0);\n          moveItems(!rtl ^ !(lastMouseClientX > bodyWidth / 2) ? toIndex + 1 : toIndex - 1);\n        } else {\n          moveItems(getNextIndexFromPosition(lastMouseClientX, 0.33));\n        }\n      }\n    };\n    setTimeout(function () {\n      scrollContentNode.addEventListener('scroll', handleMoveItemsByScroll);\n    }, 400); // Wait for finishing scroll animation when initial selected item is given.\n\n    return function () {\n      scrollContentNode.removeEventListener('scroll', handleMoveItemsByScroll);\n    };\n  }, [getNextIndexFromPosition, moveItems, scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    if (initialSelected !== null && initialSelected !== void 0 && initialSelected.itemIndex) {\n      var _scrollContainerHandl2;\n      (_scrollContainerHandl2 = scrollContainerHandle.current) === null || _scrollContainerHandl2 === void 0 ? void 0 : _scrollContainerHandl2.scrollTo({\n        animate: false,\n        position: {\n          x: initialSelected.scrollLeft\n        }\n      });\n    }\n  }, [initialSelected === null || initialSelected === void 0 ? void 0 : initialSelected.itemIndex, initialSelected === null || initialSelected === void 0 ? void 0 : initialSelected.scrollLeft, scrollContainerHandle]);\n  (0, _react.useLayoutEffect)(function () {\n    if (initialSelected !== null && initialSelected !== void 0 && initialSelected.itemIndex) {\n      var initialSelectedItem = wrapperRef.current.children[initialSelected.itemIndex - 1];\n      if (initialSelectedItem !== null && initialSelectedItem !== void 0 && initialSelectedItem.dataset.index) {\n        mutableRef.current.focusedItem = initialSelectedItem;\n        mutableRef.current.lastMouseClientX = (0, _pointer.getLastPointerPosition)().x;\n        startEditing(initialSelectedItem);\n        (0, _pointer.setPointerMode)(false);\n        _spotlight[\"default\"].focus(initialSelectedItem.children[1]);\n      }\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/(0, _jsxRuntime.jsxs)(TouchableDiv, {\n    holdConfig: holdConfig,\n    className: (0, _classnames[\"default\"])(mergedCss.wrapper, _defineProperty({}, mergedCss.centered, centered)),\n    onClickCapture: handleClickCapture,\n    onHoldStart: handleHoldStart,\n    onKeyDownCapture: handleKeyDownCapture,\n    onKeyUpCapture: handleKeyUpCapture,\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    ref: wrapperRef,\n    children: [children, /*#__PURE__*/(0, _jsxRuntime.jsx)(_AnnounceDecorator.Announce, {\n      ref: announceRef\n    }, \"editable-wrapper-announce\")]\n  });\n};\nexports.EditableWrapper = EditableWrapper;\nEditableWrapper.displayName = 'EditableWrapper';\nEditableWrapper.propTypes = /** @lends sandstone/Scroller.EditableWrapper.prototype */{\n  /**\n   * Enables editing items in the scroller.\n   * You can specify props for editable scroller as an object.\n   * See the datails in {@link sandstone/Scroller.EditableShape|EditableShape}\n   *\n   * @type {sandstone/Scroller.EditableShape}\n   * @public\n   */\n  editable: EditableShape,\n  /**\n   * Obtains a reference to the scroll container handle.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContainerHandle: _propTypes[\"default\"].ref,\n  /**\n   * Obtains a reference to the scroll container node.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContainerRef: _propTypes[\"default\"].ref,\n  /**\n   * Obtains a reference to the scroll content node.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContentRef: _propTypes[\"default\"].ref\n};\nvar _default = EditableWrapper;\nexports[\"default\"] = _default;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}