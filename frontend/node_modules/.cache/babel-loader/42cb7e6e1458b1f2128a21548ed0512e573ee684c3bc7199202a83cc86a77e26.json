{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useEventWheel = exports.useEventVoice = exports.useEventTouch = exports.useEventMouse = exports.useEventMonitor = exports.useEventKey = exports.useEventFocus = void 0;\nvar _handle = require(\"@enact/core/handle\");\nvar _platform = _interopRequireDefault(require(\"@enact/core/platform\"));\nvar _snapshot = require(\"@enact/core/snapshot\");\nvar _util = require(\"@enact/core/util\");\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\nvar _utils = require(\"@enact/spotlight/src/utils\");\nvar _target = require(\"@enact/spotlight/src/target\");\nvar _useScroll = require(\"@enact/ui/useScroll\");\nvar _utilEvent = _interopRequireDefault(require(\"@enact/ui/useScroll/utilEvent\"));\nvar _utilDOM = _interopRequireDefault(require(\"@enact/ui/useScroll/utilDOM\"));\nvar _react = require(\"react\");\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj[\"default\"] = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e2) {\n          throw _e2;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e3) {\n      didErr = true;\n      err = _e3;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nvar animationDuration = _useScroll.constants.animationDuration,\n  epsilon = _useScroll.constants.epsilon,\n  isPageDown = _useScroll.constants.isPageDown,\n  isPageUp = _useScroll.constants.isPageUp,\n  overscrollTypeOnce = _useScroll.constants.overscrollTypeOnce,\n  paginationPageMultiplier = _useScroll.constants.paginationPageMultiplier,\n  scrollWheelPageMultiplierForMaxPixel = _useScroll.constants.scrollWheelPageMultiplierForMaxPixel;\nvar lastPointer = {\n  x: 0,\n  y: 0\n};\nvar useEventFocus = function useEventFocus(props, instances) {\n  var scrollMode = props.scrollMode;\n  var scrollContainerHandle = instances.scrollContainerHandle,\n    scrollContainerRef = instances.scrollContainerRef,\n    scrollContentRef = instances.scrollContentRef,\n    spottable = instances.spottable,\n    themeScrollContentHandle = instances.themeScrollContentHandle;\n\n  // Functions\n\n  var startScrollOnFocus = function startScrollOnFocus(pos) {\n    if (pos) {\n      var top = pos.top,\n        left = pos.left,\n        bounds = scrollContainerHandle.current.getScrollBounds();\n      if (scrollMode === 'translate') {\n        var scrollHorizontally = bounds.maxLeft > 0 && left !== scrollContainerHandle.current.scrollLeft,\n          scrollVertically = bounds.maxTop > 0 && top !== scrollContainerHandle.current.scrollTop;\n        if (scrollHorizontally || scrollVertically) {\n          scrollContainerHandle.current.start({\n            targetX: left,\n            targetY: top,\n            animate: animationDuration > 0 && spottable.current.animateOnFocus,\n            overscrollEffect: props.overscrollEffectOn[scrollContainerHandle.current.lastInputType] && (!themeScrollContentHandle.current.shouldPreventOverscrollEffect || !themeScrollContentHandle.current.shouldPreventOverscrollEffect())\n          });\n          spottable.current.lastScrollPositionOnFocus = pos;\n        }\n      } else {\n        var _scrollHorizontally = bounds.maxLeft > 0 && Math.abs(left - scrollContainerHandle.current.scrollLeft) > epsilon,\n          _scrollVertically = bounds.maxTop > 0 && Math.abs(top - scrollContainerHandle.current.scrollTop) > epsilon;\n        if (_scrollHorizontally || _scrollVertically) {\n          scrollContainerHandle.current.start({\n            targetX: left,\n            targetY: top,\n            animate: spottable.current.animateOnFocus,\n            overscrollEffect: props.overscrollEffectOn[scrollContainerHandle.current.lastInputType] && (!themeScrollContentHandle.current.shouldPreventOverscrollEffect || !themeScrollContentHandle.current.shouldPreventOverscrollEffect())\n          });\n          spottable.current.lastScrollPositionOnFocus = pos;\n        }\n      }\n    }\n  };\n  function calculateAndScrollTo() {\n    var positionFn = themeScrollContentHandle.current.calculatePositionOnFocus,\n      scrollContentNode = scrollContentRef.current,\n      spotItem = _spotlight[\"default\"].getCurrent();\n    if (spotItem && positionFn && _utilDOM[\"default\"].containsDangerously(scrollContentNode, spotItem)) {\n      var lastPos = spottable.current.lastScrollPositionOnFocus;\n      var pos;\n\n      // If scroll animation is ongoing, we need to pass last target position to\n      // determine correct scroll position.\n      if (lastPos & (scrollMode === 'translate' && scrollContainerHandle.current.animator.isAnimating() || scrollMode === 'native' && scrollContainerHandle.current.scrolling)) {\n        var contentRect = (0, _utils.getRect)(scrollContentNode),\n          itemRect = (0, _utils.getRect)(spotItem);\n        var scrollPosition;\n        if (props.direction === 'horizontal' || props.direction === 'both' && !(itemRect.left >= contentRect.left && itemRect.right <= contentRect.right)) {\n          scrollPosition = lastPos.left;\n        } else if (props.direction === 'vertical' || props.direction === 'both' && !(itemRect.top >= contentRect.top && itemRect.bottom <= contentRect.bottom)) {\n          scrollPosition = lastPos.top;\n        }\n        pos = positionFn({\n          item: spotItem,\n          scrollPosition: scrollPosition\n        });\n      } else {\n        pos = positionFn({\n          item: spotItem\n        });\n      }\n      if (pos && (pos.left !== scrollContainerHandle.current.scrollLeft || pos.top !== scrollContainerHandle.current.scrollTop)) {\n        startScrollOnFocus(pos);\n      }\n\n      // update `scrollHeight`\n      scrollContainerHandle.current.bounds.scrollHeight = scrollContainerHandle.current.getScrollBounds().scrollHeight;\n    }\n  }\n  function handleFocus(ev) {\n    var shouldPreventScrollByFocus = themeScrollContentHandle.current.shouldPreventScrollByFocus ? themeScrollContentHandle.current.shouldPreventScrollByFocus() : false;\n    if (spottable.current.isWheeling) {\n      scrollContainerHandle.current.stop();\n      if (scrollMode === 'translate') {\n        spottable.current.animateOnFocus = false;\n      }\n    }\n    if (!(shouldPreventScrollByFocus || _spotlight[\"default\"].getPointerMode() || scrollContainerHandle.current.isDragging || spottable.current.indexToFocus)) {\n      var item = ev.target,\n        spotItem = _spotlight[\"default\"].getCurrent();\n      if (item && item === spotItem) {\n        calculateAndScrollTo();\n      }\n    } else if (themeScrollContentHandle.current.setLastFocusedNode) {\n      themeScrollContentHandle.current.setLastFocusedNode(ev.target);\n    }\n  }\n  function hasFocus() {\n    var current = _spotlight[\"default\"].getCurrent();\n    if (current && scrollContainerRef.current) {\n      return _utilDOM[\"default\"].containsDangerously(scrollContainerRef, current);\n    }\n  }\n\n  // Return\n\n  return {\n    calculateAndScrollTo: calculateAndScrollTo,\n    handleFocus: handleFocus,\n    hasFocus: hasFocus\n  };\n};\nexports.useEventFocus = useEventFocus;\nvar useEventKey = function useEventKey(props, instances, context) {\n  var scrollMode = props.scrollMode;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n    spottable = instances.spottable,\n    scrollContentRef = instances.scrollContentRef,\n    scrollContainerHandle = instances.scrollContainerHandle;\n  var checkAndApplyOverscrollEffectByDirection = context.checkAndApplyOverscrollEffectByDirection,\n    hasFocus = context.hasFocus,\n    isContent = context.isContent;\n\n  // Functions\n\n  function handleKeyDown(ev) {\n    var keyCode = ev.keyCode,\n      repeat = ev.repeat,\n      target = ev.target;\n    (0, _handle.forward)('onKeyDown', ev, props);\n    if (isPageUp(keyCode) || isPageDown(keyCode)) {\n      ev.preventDefault();\n    }\n    spottable.current.animateOnFocus = true;\n    if (!repeat && hasFocus()) {\n      var direction = null;\n      if (isPageUp(keyCode) || isPageDown(keyCode)) {\n        if (props.direction === 'vertical' || props.direction === 'both') {\n          direction = isPageUp(keyCode) ? 'up' : 'down';\n          if (isContent(target)) {\n            ev.stopPropagation();\n            scrollByPage(direction);\n          }\n          if (props.overscrollEffectOn.pageKey) {\n            checkAndApplyOverscrollEffectByDirection(direction);\n          }\n        }\n      } else if ((0, _spotlight.getDirection)(keyCode) && (scrollMode === 'translate' || scrollMode === 'native' && !_spotlight[\"default\"].getPointerMode())) {\n        var element = _spotlight[\"default\"].getCurrent();\n        scrollContainerHandle.current.lastInputType = 'arrowKey';\n        direction = (0, _spotlight.getDirection)(keyCode);\n        if (props.overscrollEffectOn.arrowKey && !(element ? (0, _target.getTargetByDirectionFromElement)(direction, element) : null)) {\n          checkAndApplyOverscrollEffectByDirection(direction);\n        }\n      }\n    }\n  }\n  function scrollByPage(pageKeyDirection) {\n    var scrollTop = scrollContainerHandle.current.scrollTop,\n      focusedItem = _spotlight[\"default\"].getCurrent(),\n      bounds = scrollContainerHandle.current.getScrollBounds(),\n      isUp = pageKeyDirection === 'up',\n      directionFactor = isUp ? -1 : 1,\n      pageDistance = directionFactor * bounds.clientHeight * paginationPageMultiplier;\n    var direction = pageKeyDirection;\n    var scrollPossible = false;\n    if (scrollMode === 'translate') {\n      scrollPossible = isUp ? scrollTop > 0 : bounds.maxTop > scrollTop;\n    } else {\n      scrollPossible = isUp ? scrollTop > 0 : bounds.maxTop - scrollTop > epsilon;\n    }\n    scrollContainerHandle.current.lastInputType = 'pageKey';\n    if (directionFactor !== scrollContainerHandle.current.wheelDirection) {\n      scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n      scrollContainerHandle.current.wheelDirection = directionFactor;\n    }\n    if (scrollPossible) {\n      if (focusedItem) {\n        var contentNode = scrollContentRef.current;\n\n        // Should do nothing when focusedItem is paging control button of Scrollbar\n        if (_utilDOM[\"default\"].containsDangerously(contentNode, focusedItem)) {\n          var contentRect = contentNode.getBoundingClientRect(),\n            clientRect = focusedItem.getBoundingClientRect(),\n            yAdjust = isUp ? 1 : -1,\n            x = (0, _util.clamp)(contentRect.left, contentRect.right, (clientRect.right + clientRect.left) / 2);\n          var y = 0;\n          if (bounds.maxTop - epsilon < scrollTop + pageDistance || epsilon > scrollTop + pageDistance) {\n            y = contentRect[isUp ? 'top' : 'bottom'] + yAdjust;\n            direction = isUp ? 'down' : 'up'; // Change direction to find target in the content\n          } else {\n            y = (0, _util.clamp)(contentRect.top, contentRect.bottom, (clientRect.bottom + clientRect.top) / 2);\n          }\n          focusedItem.blur();\n          if (!props['data-spotlight-container-disabled']) {\n            themeScrollContentHandle.current.setContainerDisabled(true);\n          }\n          if (themeScrollContentHandle.current.pauseSpotlight) {\n            themeScrollContentHandle.current.pauseSpotlight(true);\n          }\n          spottable.current.pointToFocus = {\n            direction: direction,\n            x: x,\n            y: y\n          };\n        }\n      } else {\n        spottable.current.pointToFocus = {\n          direction: direction,\n          x: lastPointer.x,\n          y: lastPointer.y\n        };\n      }\n      scrollContainerHandle.current.scrollToAccumulatedTarget(pageDistance, true, props.overscrollEffectOn.pageKey);\n    }\n  }\n  function scrollByPageOnPointerMode(ev) {\n    var keyCode = ev.keyCode,\n      repeat = ev.repeat;\n    (0, _handle.forward)('onKeyDown', ev, props);\n    ev.preventDefault();\n    spottable.current.animateOnFocus = true;\n    if (!repeat && (props.direction === 'vertical' || props.direction === 'both')) {\n      var direction = isPageUp(keyCode) ? 'up' : 'down';\n      scrollByPage(direction);\n      if (props.overscrollEffectOn.pageKey) {\n        /* if the spotlight focus will not move */\n        checkAndApplyOverscrollEffectByDirection(direction);\n      }\n      return true; // means consumed\n    }\n\n    return false; // means to be propagated\n  }\n\n  // Return\n\n  return {\n    handleKeyDown: handleKeyDown,\n    lastPointer: lastPointer,\n    scrollByPageOnPointerMode: scrollByPageOnPointerMode\n  };\n};\n\n/*\n * Track the last position of the pointer to check if a list should scroll by\n * page up/down keys when the pointer is on a list without any focused node.\n * `keydown` event does not occur if there is no focus on the node and\n * its descendants, we add `keydown` handler to `document` also.\n */\nexports.useEventKey = useEventKey;\nvar scrollers = new Map();\n\n// An app could have lists and/or scrollers more than one,\n// so we should test all of them when page up/down key is pressed.\nvar pointerTracker = function pointerTracker(ev) {\n  lastPointer.x = ev.clientX;\n  lastPointer.y = ev.clientY;\n};\nvar pageKeyHandler = function pageKeyHandler(ev) {\n  var keyCode = ev.keyCode;\n  if (_spotlight[\"default\"].getPointerMode() && !_spotlight[\"default\"].getCurrent() && (isPageUp(keyCode) || isPageDown(keyCode))) {\n    var _lastPointer = lastPointer,\n      x = _lastPointer.x,\n      y = _lastPointer.y,\n      elem = document.elementFromPoint(x, y);\n    if (elem) {\n      var _iterator = _createForOfIteratorHelper(scrollers),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n            key = _step$value[0],\n            value = _step$value[1];\n          if (_utilDOM[\"default\"].containsDangerously(value, elem)) {\n            /* To handle page keys in nested scrollable components,\n             * break the loop only when `scrollByPageOnPointerMode` returns `true`.\n             * This approach assumes that an inner scrollable component is\n             * mounted earlier than an outer scrollable component.\n             */\n            if (key.scrollByPageOnPointerMode(ev)) {\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }\n};\nvar useEventMonitor = function useEventMonitor(props, instances, context) {\n  var scrollContainerRef = instances.scrollContainerRef;\n  var lastPointerProp = context.lastPointer,\n    scrollByPageOnPointerMode = context.scrollByPageOnPointerMode;\n\n  // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    pageKeyHandlerObj: {\n      scrollByPageOnPointerMode: scrollByPageOnPointerMode\n    }\n  });\n  lastPointer = lastPointerProp;\n\n  // Hooks\n\n  (0, _react.useEffect)(function () {\n    var setMonitorEventTarget = function setMonitorEventTarget(target) {\n      scrollers.set(mutableRef.current.pageKeyHandlerObj, target);\n    };\n    var deleteMonitorEventTarget = function deleteMonitorEventTarget() {\n      scrollers[\"delete\"](mutableRef.current.pageKeyHandlerObj);\n    };\n    setMonitorEventTarget(scrollContainerRef.current);\n    return function () {\n      // TODO: Replace `this` to something.\n      deleteMonitorEventTarget();\n    };\n  }, [scrollContainerRef]);\n};\nexports.useEventMonitor = useEventMonitor;\n(0, _snapshot.onWindowReady)(function () {\n  (0, _utilEvent[\"default\"])('mousemove').addEventListener(document, pointerTracker);\n  (0, _utilEvent[\"default\"])('keydown').addEventListener(document, pageKeyHandler);\n});\nvar useEventMouse = function useEventMouse(props, instances) {\n  var scrollMode = props.scrollMode;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n    scrollContainerHandle = instances.scrollContainerHandle;\n\n  // Functions\n\n  function handleFlick(_ref) {\n    var direction = _ref.direction;\n    var _scrollContainerHandl = scrollContainerHandle.current,\n      canScrollHorizontally = _scrollContainerHandl.canScrollHorizontally,\n      canScrollVertically = _scrollContainerHandl.canScrollVertically,\n      bounds = scrollContainerHandle.current.getScrollBounds(),\n      focusedItem = _spotlight[\"default\"].getCurrent();\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n    if ((direction === 'vertical' && canScrollVertically(bounds) || direction === 'horizontal' && canScrollHorizontally(bounds)) && !props['data-spotlight-container-disabled']) {\n      themeScrollContentHandle.current.setContainerDisabled(true);\n    }\n  }\n  function handleMouseDown(ev) {\n    if (props['data-spotlight-container-disabled']) {\n      ev.preventDefault();\n    } else if (scrollMode === 'native') {\n      themeScrollContentHandle.current.setContainerDisabled(false);\n    }\n  }\n\n  // Return\n\n  return {\n    handleFlick: handleFlick,\n    handleMouseDown: handleMouseDown\n  };\n};\nexports.useEventMouse = useEventMouse;\nvar useEventTouch = function useEventTouch() {\n  // Functions\n\n  function handleTouchStart() {\n    var focusedItem = _spotlight[\"default\"].getCurrent();\n    if (!_spotlight[\"default\"].isPaused() && focusedItem) {\n      focusedItem.blur();\n    }\n  }\n\n  // Return\n\n  return {\n    handleTouchStart: handleTouchStart\n  };\n};\nexports.useEventTouch = useEventTouch;\nvar useEventVoice = function useEventVoice(props, instances) {\n  var scrollContainerRef = instances.scrollContainerRef,\n    scrollContainerHandle = instances.scrollContainerHandle;\n\n  // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    isVoiceControl: false,\n    voiceControlDirection: 'vertical'\n  });\n\n  // Functions\n\n  var updateFocusAfterVoiceControl = function updateFocusAfterVoiceControl() {\n    var spotItem = _spotlight[\"default\"].getCurrent(),\n      scrollContainerNode = scrollContainerRef.current;\n    if (_utilDOM[\"default\"].containsDangerously(scrollContainerNode, spotItem)) {\n      var viewportBounds = scrollContainerNode.getBoundingClientRect(),\n        spotItemBounds = spotItem.getBoundingClientRect(),\n        nodes = _spotlight[\"default\"].getSpottableDescendants(scrollContainerNode.dataset.spotlightId),\n        first = mutableRef.current.voiceControlDirection === 'vertical' ? 'top' : 'left',\n        last = mutableRef.current.voiceControlDirection === 'vertical' ? 'bottom' : 'right';\n      if (spotItemBounds[last] < viewportBounds[first] || spotItemBounds[first] > viewportBounds[last]) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeBounds = nodes[i].getBoundingClientRect();\n          if (nodeBounds[first] > viewportBounds[first] && nodeBounds[last] < viewportBounds[last]) {\n            _spotlight[\"default\"].focus(nodes[i]);\n            break;\n          }\n        }\n      }\n    }\n  };\n  function stopVoice() {\n    if (mutableRef.current.isVoiceControl) {\n      mutableRef.current.isVoiceControl = false;\n      updateFocusAfterVoiceControl();\n    }\n  }\n  var isReachedEdge = function isReachedEdge(scrollPos, ltrBound, rtlBound) {\n    var isRtl = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var bound = isRtl ? rtlBound : ltrBound;\n    return bound === 0 && scrollPos === 0 || bound > 0 && scrollPos >= bound - 1;\n  };\n  var handleVoice = function handleVoice(e) {\n    var isHorizontal = props.direction === 'horizontal',\n      isRtl = scrollContainerHandle.current.rtl,\n      _scrollContainerHandl2 = scrollContainerHandle.current,\n      scrollTop = _scrollContainerHandl2.scrollTop,\n      scrollLeft = _scrollContainerHandl2.scrollLeft,\n      _scrollContainerHandl3 = scrollContainerHandle.current.getScrollBounds(),\n      maxLeft = _scrollContainerHandl3.maxLeft,\n      maxTop = _scrollContainerHandl3.maxTop,\n      verticalDirection = ['up', 'down', 'top', 'bottom'],\n      horizontalDirection = isRtl ? ['right', 'left', 'rightmost', 'leftmost'] : ['left', 'right', 'leftmost', 'rightmost'],\n      movement = ['previous', 'next', 'first', 'last'];\n    var scroll = e && e.detail && e.detail.scroll,\n      index = movement.indexOf(scroll);\n    if (index > -1) {\n      scroll = isHorizontal ? horizontalDirection[index] : verticalDirection[index];\n    }\n    mutableRef.current.voiceControlDirection = verticalDirection.includes(scroll) && 'vertical' || horizontalDirection.includes(scroll) && 'horizontal' || null;\n\n    // Case 1. Invalid direction\n    if (mutableRef.current.voiceControlDirection === null) {\n      mutableRef.current.isVoiceControl = false;\n      // Case 2. Cannot scroll\n    } else if (['up', 'top'].includes(scroll) && isReachedEdge(scrollTop, 0) || ['down', 'bottom'].includes(scroll) && isReachedEdge(scrollTop, maxTop) || ['left', 'leftmost'].includes(scroll) && isReachedEdge(scrollLeft, 0, maxLeft, isRtl) || ['right', 'rightmost'].includes(scroll) && isReachedEdge(scrollLeft, maxLeft, 0, isRtl)) {\n      if (window.webOSVoiceReportActionResult) {\n        window.webOSVoiceReportActionResult({\n          voiceUi: {\n            exception: 'alreadyCompleted'\n          }\n        });\n        e.preventDefault();\n      }\n      // Case 3. Can scroll\n    } else {\n      mutableRef.current.isVoiceControl = true;\n      if (['up', 'down', 'left', 'right'].includes(scroll)) {\n        var bounds = scrollContainerHandle.current.getScrollBounds(),\n          directionFactor = scroll === 'up' || scroll === 'left' && !isRtl || scroll === 'right' && isRtl,\n          scrollVertically = verticalDirection.includes(scroll),\n          direction = directionFactor ? -1 : 1,\n          pageDistance = direction * (scrollVertically ? bounds.clientHeight : bounds.clientWidth) * paginationPageMultiplier;\n        scrollContainerHandle.current.lastInputType = 'pageKey';\n        if (direction !== scrollContainerHandle.current.wheelDirection) {\n          scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n          scrollContainerHandle.current.wheelDirection = direction;\n        }\n        scrollContainerHandle.current.scrollToAccumulatedTarget(pageDistance, scrollVertically, props.overscrollEffectOn.pageKey);\n      } else {\n        // ['top', 'bottom', 'leftmost', 'rightmost'].includes(scroll)\n        scrollContainerHandle.current.scrollTo({\n          align: verticalDirection.includes(scroll) && scroll || (scroll === 'leftmost' && isRtl || scroll === 'rightmost' && !isRtl) && 'right' || 'left'\n        });\n      }\n      e.preventDefault();\n    }\n  };\n  function addVoiceEventListener(scrollContentRef) {\n    if (_platform[\"default\"].webos) {\n      (0, _utilEvent[\"default\"])('webOSVoice').addEventListener(scrollContentRef, handleVoice);\n      if (scrollContainerHandle && scrollContainerHandle.current && scrollContainerHandle.current.getScrollBounds) {\n        var bounds = scrollContainerHandle.current.getScrollBounds();\n        if (scrollContainerHandle.current.canScrollVertically(bounds) || scrollContainerHandle.current.canScrollHorizontally(bounds)) {\n          scrollContentRef.current.setAttribute('data-webos-voice-intent', 'Scroll');\n        }\n      }\n    }\n  }\n  function removeVoiceEventListener(scrollContentRef) {\n    if (_platform[\"default\"].webos) {\n      (0, _utilEvent[\"default\"])('webOSVoice').removeEventListener(scrollContentRef, handleVoice);\n      scrollContentRef.current.removeAttribute('data-webos-voice-intent');\n    }\n  }\n\n  // Return\n\n  return {\n    addVoiceEventListener: addVoiceEventListener,\n    removeVoiceEventListener: removeVoiceEventListener,\n    stopVoice: stopVoice\n  };\n};\nexports.useEventVoice = useEventVoice;\nvar useEventWheel = function useEventWheel(props, instances) {\n  var dataSize = props.dataSize,\n    scrollMode = props.scrollMode,\n    snapToCenter = props.snapToCenter;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n    scrollContainerHandle = instances.scrollContainerHandle,\n    scrollContentHandle = instances.scrollContentHandle,\n    scrollContentRef = instances.scrollContentRef,\n    spottable = instances.spottable;\n\n  // Functions\n  function initializeWheeling() {\n    if (!props['data-spotlight-container-disabled']) {\n      themeScrollContentHandle.current.setContainerDisabled(true);\n    }\n    spottable.current.isWheeling = true;\n  }\n  function handleWheel(_ref2) {\n    var delta = _ref2.delta;\n    var focusedItem = _spotlight[\"default\"].getCurrent();\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n    if (delta !== 0) {\n      initializeWheeling();\n    }\n  }\n\n  /*\n   * wheel event handler;\n   * - for horizontal scroll, supports wheel action on any children nodes since web engine cannot support this\n   * - for vertical scroll, supports wheel action on scrollbars only\n   */\n  function handleWheelNative(ev) {\n    var overscrollEffectRequired = props.overscrollEffectOn.wheel;\n    var bounds = scrollContainerHandle.current.getScrollBounds();\n    var canScrollHorizontally = scrollContainerHandle.current.canScrollHorizontally(bounds);\n    var canScrollVertically = scrollContainerHandle.current.canScrollVertically(bounds);\n    var eventDeltaMode = ev.deltaMode;\n    var eventDelta = -ev.wheelDeltaY || ev.deltaY;\n    var positiveDelta = eventDelta > 0;\n    var negativeDelta = eventDelta < 0;\n    var _scrollContainerHandl4 = scrollContainerHandle.current,\n      scrollTop = _scrollContainerHandl4.scrollTop,\n      scrollLeft = _scrollContainerHandl4.scrollLeft;\n    var offset = snapToCenter ? scrollContentHandle.current.primary.gridSize : 0;\n    var delta = 0;\n    var needToHideScrollbarTrack = false;\n    if (typeof window !== 'undefined') {\n      window.document.activeElement.blur();\n    }\n    scrollContainerHandle.current.showScrollbarTrack(bounds);\n\n    // FIXME This routine is a temporary support for horizontal wheel scroll.\n    // FIXME If web engine supports horizontal wheel, this routine should be refined or removed.\n    if (canScrollVertically) {\n      // This routine handles wheel events on scrollbars for vertical scroll.\n      if (negativeDelta && scrollTop > 0 + offset || positiveDelta && scrollTop < bounds.maxTop - offset) {\n        if (!spottable.current.isWheeling) {\n          initializeWheeling();\n        }\n\n        // If ev.target is a descendant of scrollContent, the event will be handled on scroll event handler.\n        if (!_utilDOM[\"default\"].containsDangerously(scrollContentRef.current, ev.target) || snapToCenter) {\n          delta = scrollContainerHandle.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientHeight * scrollWheelPageMultiplierForMaxPixel);\n          needToHideScrollbarTrack = !delta;\n          ev.preventDefault();\n        } else if (overscrollEffectRequired) {\n          scrollContainerHandle.current.checkAndApplyOverscrollEffect('vertical', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n        ev.stopPropagation();\n      } else {\n        if (overscrollEffectRequired && (negativeDelta && scrollTop <= 0 || positiveDelta && scrollTop >= bounds.maxTop)) {\n          scrollContainerHandle.current.applyOverscrollEffect('vertical', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n        needToHideScrollbarTrack = true;\n      }\n    } else if (canScrollHorizontally) {\n      // this routine handles wheel events on any children for horizontal scroll.\n      if (negativeDelta && scrollLeft > 0 + offset || positiveDelta && scrollLeft < bounds.maxLeft - offset) {\n        if (!spottable.current.isWheeling) {\n          initializeWheeling();\n        }\n        delta = scrollContainerHandle.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientWidth * scrollWheelPageMultiplierForMaxPixel);\n        needToHideScrollbarTrack = !delta;\n        ev.preventDefault();\n        ev.stopPropagation();\n      } else {\n        if (overscrollEffectRequired && (negativeDelta && scrollLeft <= 0 || positiveDelta && scrollLeft >= bounds.maxLeft)) {\n          scrollContainerHandle.current.applyOverscrollEffect('horizontal', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n        needToHideScrollbarTrack = true;\n      }\n    }\n    if (delta !== 0) {\n      /* prevent native scrolling feature for vertical direction */\n      ev.preventDefault();\n      var direction = Math.sign(delta);\n\n      // Not to accumulate scroll position if wheel direction is different from hold direction\n      if (direction !== scrollContainerHandle.current.wheelDirection) {\n        scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n        scrollContainerHandle.current.wheelDirection = direction;\n      }\n      if (!snapToCenter) {\n        scrollContainerHandle.current.scrollToAccumulatedTarget(delta, canScrollVertically, overscrollEffectRequired);\n      } else {\n        var dimensionToExtent = scrollContentHandle.current.dimensionToExtent;\n        var currentIndex = scrollContentHandle.current.getCenterItemIndexFromScrollPosition(canScrollVertically ? scrollTop : scrollLeft);\n        var nextIndex = currentIndex + direction * dimensionToExtent;\n        if (nextIndex > 0 && nextIndex < dataSize - 1) {\n          if (typeof document === 'object') {\n            var target = scrollContentRef.current.querySelector(\"[data-index=\\\"\".concat(nextIndex, \"\\\"] > div\"));\n\n            // remove effect\n            themeScrollContentHandle.current.removeScaleEffect();\n            // add effect\n            themeScrollContentHandle.current.addScaleEffect(target);\n          }\n          if (themeScrollContentHandle.current.resetSnapToCenterStatus) {\n            themeScrollContentHandle.current.resetSnapToCenterStatus();\n          }\n          scrollContainerHandle.current.scrollTo({\n            index: nextIndex,\n            stickTo: 'center'\n          });\n        }\n      }\n    }\n    if (needToHideScrollbarTrack) {\n      scrollContainerHandle.current.startHidingScrollbarTrack();\n    }\n  }\n\n  // Return\n\n  return {\n    handleWheel: scrollMode === 'translate' ? handleWheel : handleWheelNative\n  };\n};\nexports.useEventWheel = useEventWheel;","map":{"version":3,"names":["Object","defineProperty","exports","value","useEventWheel","useEventVoice","useEventTouch","useEventMouse","useEventMonitor","useEventKey","useEventFocus","_handle","require","_platform","_interopRequireDefault","_snapshot","_util","_spotlight","_interopRequireWildcard","_utils","_target","_useScroll","_utilEvent","_utilDOM","_react","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","length","err","Array","isArray","_createForOfIteratorHelper","o","allowArrayLike","it","F","s","n","e","_e2","f","normalCompletion","didErr","step","_e3","minLen","_arrayLikeToArray","toString","slice","constructor","name","from","test","len","arr2","animationDuration","constants","epsilon","isPageDown","isPageUp","overscrollTypeOnce","paginationPageMultiplier","scrollWheelPageMultiplierForMaxPixel","lastPointer","x","y","props","instances","scrollMode","scrollContainerHandle","scrollContainerRef","scrollContentRef","spottable","themeScrollContentHandle","startScrollOnFocus","pos","top","left","bounds","current","getScrollBounds","scrollHorizontally","maxLeft","scrollLeft","scrollVertically","maxTop","scrollTop","start","targetX","targetY","animate","animateOnFocus","overscrollEffect","overscrollEffectOn","lastInputType","shouldPreventOverscrollEffect","lastScrollPositionOnFocus","_scrollHorizontally","Math","abs","_scrollVertically","calculateAndScrollTo","positionFn","calculatePositionOnFocus","scrollContentNode","spotItem","getCurrent","containsDangerously","lastPos","animator","isAnimating","scrolling","contentRect","getRect","itemRect","scrollPosition","direction","right","bottom","item","scrollHeight","handleFocus","ev","shouldPreventScrollByFocus","isWheeling","stop","getPointerMode","isDragging","indexToFocus","target","setLastFocusedNode","hasFocus","context","checkAndApplyOverscrollEffectByDirection","isContent","handleKeyDown","keyCode","repeat","forward","preventDefault","stopPropagation","scrollByPage","pageKey","getDirection","element","arrowKey","getTargetByDirectionFromElement","pageKeyDirection","focusedItem","isUp","directionFactor","pageDistance","clientHeight","scrollPossible","wheelDirection","isScrollAnimationTargetAccumulated","contentNode","getBoundingClientRect","clientRect","yAdjust","clamp","blur","setContainerDisabled","pauseSpotlight","pointToFocus","scrollToAccumulatedTarget","scrollByPageOnPointerMode","scrollers","Map","pointerTracker","clientX","clientY","pageKeyHandler","_lastPointer","elem","document","elementFromPoint","_iterator","_step","_step$value","lastPointerProp","mutableRef","useRef","pageKeyHandlerObj","useEffect","setMonitorEventTarget","deleteMonitorEventTarget","onWindowReady","addEventListener","handleFlick","_ref","_scrollContainerHandl","canScrollHorizontally","canScrollVertically","handleMouseDown","handleTouchStart","isPaused","isVoiceControl","voiceControlDirection","updateFocusAfterVoiceControl","scrollContainerNode","viewportBounds","spotItemBounds","nodes","getSpottableDescendants","dataset","spotlightId","first","last","nodeBounds","focus","stopVoice","isReachedEdge","scrollPos","ltrBound","rtlBound","isRtl","arguments","undefined","bound","handleVoice","isHorizontal","rtl","_scrollContainerHandl2","_scrollContainerHandl3","verticalDirection","horizontalDirection","movement","scroll","detail","index","indexOf","includes","window","webOSVoiceReportActionResult","voiceUi","exception","clientWidth","scrollTo","align","addVoiceEventListener","webos","setAttribute","removeVoiceEventListener","removeEventListener","removeAttribute","dataSize","snapToCenter","scrollContentHandle","initializeWheeling","handleWheel","_ref2","delta","handleWheelNative","overscrollEffectRequired","wheel","eventDeltaMode","deltaMode","eventDelta","wheelDeltaY","deltaY","positiveDelta","negativeDelta","_scrollContainerHandl4","offset","primary","gridSize","needToHideScrollbarTrack","activeElement","showScrollbarTrack","calculateDistanceByWheel","checkAndApplyOverscrollEffect","applyOverscrollEffect","sign","dimensionToExtent","currentIndex","getCenterItemIndexFromScrollPosition","nextIndex","querySelector","concat","removeScaleEffect","addScaleEffect","resetSnapToCenterStatus","stickTo","startHidingScrollbarTrack"],"sources":["/home/islab/LGEE/project/frontend/node_modules/@enact/sandstone/useScroll/useEvent.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useEventWheel = exports.useEventVoice = exports.useEventTouch = exports.useEventMouse = exports.useEventMonitor = exports.useEventKey = exports.useEventFocus = void 0;\nvar _handle = require(\"@enact/core/handle\");\nvar _platform = _interopRequireDefault(require(\"@enact/core/platform\"));\nvar _snapshot = require(\"@enact/core/snapshot\");\nvar _util = require(\"@enact/core/util\");\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\nvar _utils = require(\"@enact/spotlight/src/utils\");\nvar _target = require(\"@enact/spotlight/src/target\");\nvar _useScroll = require(\"@enact/ui/useScroll\");\nvar _utilEvent = _interopRequireDefault(require(\"@enact/ui/useScroll/utilEvent\"));\nvar _utilDOM = _interopRequireDefault(require(\"@enact/ui/useScroll/utilDOM\"));\nvar _react = require(\"react\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nvar animationDuration = _useScroll.constants.animationDuration,\n  epsilon = _useScroll.constants.epsilon,\n  isPageDown = _useScroll.constants.isPageDown,\n  isPageUp = _useScroll.constants.isPageUp,\n  overscrollTypeOnce = _useScroll.constants.overscrollTypeOnce,\n  paginationPageMultiplier = _useScroll.constants.paginationPageMultiplier,\n  scrollWheelPageMultiplierForMaxPixel = _useScroll.constants.scrollWheelPageMultiplierForMaxPixel;\nvar lastPointer = {\n  x: 0,\n  y: 0\n};\nvar useEventFocus = function useEventFocus(props, instances) {\n  var scrollMode = props.scrollMode;\n  var scrollContainerHandle = instances.scrollContainerHandle,\n    scrollContainerRef = instances.scrollContainerRef,\n    scrollContentRef = instances.scrollContentRef,\n    spottable = instances.spottable,\n    themeScrollContentHandle = instances.themeScrollContentHandle;\n\n  // Functions\n\n  var startScrollOnFocus = function startScrollOnFocus(pos) {\n    if (pos) {\n      var top = pos.top,\n        left = pos.left,\n        bounds = scrollContainerHandle.current.getScrollBounds();\n      if (scrollMode === 'translate') {\n        var scrollHorizontally = bounds.maxLeft > 0 && left !== scrollContainerHandle.current.scrollLeft,\n          scrollVertically = bounds.maxTop > 0 && top !== scrollContainerHandle.current.scrollTop;\n        if (scrollHorizontally || scrollVertically) {\n          scrollContainerHandle.current.start({\n            targetX: left,\n            targetY: top,\n            animate: animationDuration > 0 && spottable.current.animateOnFocus,\n            overscrollEffect: props.overscrollEffectOn[scrollContainerHandle.current.lastInputType] && (!themeScrollContentHandle.current.shouldPreventOverscrollEffect || !themeScrollContentHandle.current.shouldPreventOverscrollEffect())\n          });\n          spottable.current.lastScrollPositionOnFocus = pos;\n        }\n      } else {\n        var _scrollHorizontally = bounds.maxLeft > 0 && Math.abs(left - scrollContainerHandle.current.scrollLeft) > epsilon,\n          _scrollVertically = bounds.maxTop > 0 && Math.abs(top - scrollContainerHandle.current.scrollTop) > epsilon;\n        if (_scrollHorizontally || _scrollVertically) {\n          scrollContainerHandle.current.start({\n            targetX: left,\n            targetY: top,\n            animate: spottable.current.animateOnFocus,\n            overscrollEffect: props.overscrollEffectOn[scrollContainerHandle.current.lastInputType] && (!themeScrollContentHandle.current.shouldPreventOverscrollEffect || !themeScrollContentHandle.current.shouldPreventOverscrollEffect())\n          });\n          spottable.current.lastScrollPositionOnFocus = pos;\n        }\n      }\n    }\n  };\n  function calculateAndScrollTo() {\n    var positionFn = themeScrollContentHandle.current.calculatePositionOnFocus,\n      scrollContentNode = scrollContentRef.current,\n      spotItem = _spotlight[\"default\"].getCurrent();\n    if (spotItem && positionFn && _utilDOM[\"default\"].containsDangerously(scrollContentNode, spotItem)) {\n      var lastPos = spottable.current.lastScrollPositionOnFocus;\n      var pos;\n\n      // If scroll animation is ongoing, we need to pass last target position to\n      // determine correct scroll position.\n      if (lastPos & (scrollMode === 'translate' && scrollContainerHandle.current.animator.isAnimating() || scrollMode === 'native' && scrollContainerHandle.current.scrolling)) {\n        var contentRect = (0, _utils.getRect)(scrollContentNode),\n          itemRect = (0, _utils.getRect)(spotItem);\n        var scrollPosition;\n        if (props.direction === 'horizontal' || props.direction === 'both' && !(itemRect.left >= contentRect.left && itemRect.right <= contentRect.right)) {\n          scrollPosition = lastPos.left;\n        } else if (props.direction === 'vertical' || props.direction === 'both' && !(itemRect.top >= contentRect.top && itemRect.bottom <= contentRect.bottom)) {\n          scrollPosition = lastPos.top;\n        }\n        pos = positionFn({\n          item: spotItem,\n          scrollPosition: scrollPosition\n        });\n      } else {\n        pos = positionFn({\n          item: spotItem\n        });\n      }\n      if (pos && (pos.left !== scrollContainerHandle.current.scrollLeft || pos.top !== scrollContainerHandle.current.scrollTop)) {\n        startScrollOnFocus(pos);\n      }\n\n      // update `scrollHeight`\n      scrollContainerHandle.current.bounds.scrollHeight = scrollContainerHandle.current.getScrollBounds().scrollHeight;\n    }\n  }\n  function handleFocus(ev) {\n    var shouldPreventScrollByFocus = themeScrollContentHandle.current.shouldPreventScrollByFocus ? themeScrollContentHandle.current.shouldPreventScrollByFocus() : false;\n    if (spottable.current.isWheeling) {\n      scrollContainerHandle.current.stop();\n      if (scrollMode === 'translate') {\n        spottable.current.animateOnFocus = false;\n      }\n    }\n    if (!(shouldPreventScrollByFocus || _spotlight[\"default\"].getPointerMode() || scrollContainerHandle.current.isDragging || spottable.current.indexToFocus)) {\n      var item = ev.target,\n        spotItem = _spotlight[\"default\"].getCurrent();\n      if (item && item === spotItem) {\n        calculateAndScrollTo();\n      }\n    } else if (themeScrollContentHandle.current.setLastFocusedNode) {\n      themeScrollContentHandle.current.setLastFocusedNode(ev.target);\n    }\n  }\n  function hasFocus() {\n    var current = _spotlight[\"default\"].getCurrent();\n    if (current && scrollContainerRef.current) {\n      return _utilDOM[\"default\"].containsDangerously(scrollContainerRef, current);\n    }\n  }\n\n  // Return\n\n  return {\n    calculateAndScrollTo: calculateAndScrollTo,\n    handleFocus: handleFocus,\n    hasFocus: hasFocus\n  };\n};\nexports.useEventFocus = useEventFocus;\nvar useEventKey = function useEventKey(props, instances, context) {\n  var scrollMode = props.scrollMode;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n    spottable = instances.spottable,\n    scrollContentRef = instances.scrollContentRef,\n    scrollContainerHandle = instances.scrollContainerHandle;\n  var checkAndApplyOverscrollEffectByDirection = context.checkAndApplyOverscrollEffectByDirection,\n    hasFocus = context.hasFocus,\n    isContent = context.isContent;\n\n  // Functions\n\n  function handleKeyDown(ev) {\n    var keyCode = ev.keyCode,\n      repeat = ev.repeat,\n      target = ev.target;\n    (0, _handle.forward)('onKeyDown', ev, props);\n    if (isPageUp(keyCode) || isPageDown(keyCode)) {\n      ev.preventDefault();\n    }\n    spottable.current.animateOnFocus = true;\n    if (!repeat && hasFocus()) {\n      var direction = null;\n      if (isPageUp(keyCode) || isPageDown(keyCode)) {\n        if (props.direction === 'vertical' || props.direction === 'both') {\n          direction = isPageUp(keyCode) ? 'up' : 'down';\n          if (isContent(target)) {\n            ev.stopPropagation();\n            scrollByPage(direction);\n          }\n          if (props.overscrollEffectOn.pageKey) {\n            checkAndApplyOverscrollEffectByDirection(direction);\n          }\n        }\n      } else if ((0, _spotlight.getDirection)(keyCode) && (scrollMode === 'translate' || scrollMode === 'native' && !_spotlight[\"default\"].getPointerMode())) {\n        var element = _spotlight[\"default\"].getCurrent();\n        scrollContainerHandle.current.lastInputType = 'arrowKey';\n        direction = (0, _spotlight.getDirection)(keyCode);\n        if (props.overscrollEffectOn.arrowKey && !(element ? (0, _target.getTargetByDirectionFromElement)(direction, element) : null)) {\n          checkAndApplyOverscrollEffectByDirection(direction);\n        }\n      }\n    }\n  }\n  function scrollByPage(pageKeyDirection) {\n    var scrollTop = scrollContainerHandle.current.scrollTop,\n      focusedItem = _spotlight[\"default\"].getCurrent(),\n      bounds = scrollContainerHandle.current.getScrollBounds(),\n      isUp = pageKeyDirection === 'up',\n      directionFactor = isUp ? -1 : 1,\n      pageDistance = directionFactor * bounds.clientHeight * paginationPageMultiplier;\n    var direction = pageKeyDirection;\n    var scrollPossible = false;\n    if (scrollMode === 'translate') {\n      scrollPossible = isUp ? scrollTop > 0 : bounds.maxTop > scrollTop;\n    } else {\n      scrollPossible = isUp ? scrollTop > 0 : bounds.maxTop - scrollTop > epsilon;\n    }\n    scrollContainerHandle.current.lastInputType = 'pageKey';\n    if (directionFactor !== scrollContainerHandle.current.wheelDirection) {\n      scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n      scrollContainerHandle.current.wheelDirection = directionFactor;\n    }\n    if (scrollPossible) {\n      if (focusedItem) {\n        var contentNode = scrollContentRef.current;\n\n        // Should do nothing when focusedItem is paging control button of Scrollbar\n        if (_utilDOM[\"default\"].containsDangerously(contentNode, focusedItem)) {\n          var contentRect = contentNode.getBoundingClientRect(),\n            clientRect = focusedItem.getBoundingClientRect(),\n            yAdjust = isUp ? 1 : -1,\n            x = (0, _util.clamp)(contentRect.left, contentRect.right, (clientRect.right + clientRect.left) / 2);\n          var y = 0;\n          if (bounds.maxTop - epsilon < scrollTop + pageDistance || epsilon > scrollTop + pageDistance) {\n            y = contentRect[isUp ? 'top' : 'bottom'] + yAdjust;\n            direction = isUp ? 'down' : 'up'; // Change direction to find target in the content\n          } else {\n            y = (0, _util.clamp)(contentRect.top, contentRect.bottom, (clientRect.bottom + clientRect.top) / 2);\n          }\n          focusedItem.blur();\n          if (!props['data-spotlight-container-disabled']) {\n            themeScrollContentHandle.current.setContainerDisabled(true);\n          }\n          if (themeScrollContentHandle.current.pauseSpotlight) {\n            themeScrollContentHandle.current.pauseSpotlight(true);\n          }\n          spottable.current.pointToFocus = {\n            direction: direction,\n            x: x,\n            y: y\n          };\n        }\n      } else {\n        spottable.current.pointToFocus = {\n          direction: direction,\n          x: lastPointer.x,\n          y: lastPointer.y\n        };\n      }\n      scrollContainerHandle.current.scrollToAccumulatedTarget(pageDistance, true, props.overscrollEffectOn.pageKey);\n    }\n  }\n  function scrollByPageOnPointerMode(ev) {\n    var keyCode = ev.keyCode,\n      repeat = ev.repeat;\n    (0, _handle.forward)('onKeyDown', ev, props);\n    ev.preventDefault();\n    spottable.current.animateOnFocus = true;\n    if (!repeat && (props.direction === 'vertical' || props.direction === 'both')) {\n      var direction = isPageUp(keyCode) ? 'up' : 'down';\n      scrollByPage(direction);\n      if (props.overscrollEffectOn.pageKey) {\n        /* if the spotlight focus will not move */\n        checkAndApplyOverscrollEffectByDirection(direction);\n      }\n      return true; // means consumed\n    }\n\n    return false; // means to be propagated\n  }\n\n  // Return\n\n  return {\n    handleKeyDown: handleKeyDown,\n    lastPointer: lastPointer,\n    scrollByPageOnPointerMode: scrollByPageOnPointerMode\n  };\n};\n\n/*\n * Track the last position of the pointer to check if a list should scroll by\n * page up/down keys when the pointer is on a list without any focused node.\n * `keydown` event does not occur if there is no focus on the node and\n * its descendants, we add `keydown` handler to `document` also.\n */\nexports.useEventKey = useEventKey;\nvar scrollers = new Map();\n\n// An app could have lists and/or scrollers more than one,\n// so we should test all of them when page up/down key is pressed.\nvar pointerTracker = function pointerTracker(ev) {\n  lastPointer.x = ev.clientX;\n  lastPointer.y = ev.clientY;\n};\nvar pageKeyHandler = function pageKeyHandler(ev) {\n  var keyCode = ev.keyCode;\n  if (_spotlight[\"default\"].getPointerMode() && !_spotlight[\"default\"].getCurrent() && (isPageUp(keyCode) || isPageDown(keyCode))) {\n    var _lastPointer = lastPointer,\n      x = _lastPointer.x,\n      y = _lastPointer.y,\n      elem = document.elementFromPoint(x, y);\n    if (elem) {\n      var _iterator = _createForOfIteratorHelper(scrollers),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n            key = _step$value[0],\n            value = _step$value[1];\n          if (_utilDOM[\"default\"].containsDangerously(value, elem)) {\n            /* To handle page keys in nested scrollable components,\n             * break the loop only when `scrollByPageOnPointerMode` returns `true`.\n             * This approach assumes that an inner scrollable component is\n             * mounted earlier than an outer scrollable component.\n             */\n            if (key.scrollByPageOnPointerMode(ev)) {\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }\n};\nvar useEventMonitor = function useEventMonitor(props, instances, context) {\n  var scrollContainerRef = instances.scrollContainerRef;\n  var lastPointerProp = context.lastPointer,\n    scrollByPageOnPointerMode = context.scrollByPageOnPointerMode;\n\n  // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    pageKeyHandlerObj: {\n      scrollByPageOnPointerMode: scrollByPageOnPointerMode\n    }\n  });\n  lastPointer = lastPointerProp;\n\n  // Hooks\n\n  (0, _react.useEffect)(function () {\n    var setMonitorEventTarget = function setMonitorEventTarget(target) {\n      scrollers.set(mutableRef.current.pageKeyHandlerObj, target);\n    };\n    var deleteMonitorEventTarget = function deleteMonitorEventTarget() {\n      scrollers[\"delete\"](mutableRef.current.pageKeyHandlerObj);\n    };\n    setMonitorEventTarget(scrollContainerRef.current);\n    return function () {\n      // TODO: Replace `this` to something.\n      deleteMonitorEventTarget();\n    };\n  }, [scrollContainerRef]);\n};\nexports.useEventMonitor = useEventMonitor;\n(0, _snapshot.onWindowReady)(function () {\n  (0, _utilEvent[\"default\"])('mousemove').addEventListener(document, pointerTracker);\n  (0, _utilEvent[\"default\"])('keydown').addEventListener(document, pageKeyHandler);\n});\nvar useEventMouse = function useEventMouse(props, instances) {\n  var scrollMode = props.scrollMode;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n    scrollContainerHandle = instances.scrollContainerHandle;\n\n  // Functions\n\n  function handleFlick(_ref) {\n    var direction = _ref.direction;\n    var _scrollContainerHandl = scrollContainerHandle.current,\n      canScrollHorizontally = _scrollContainerHandl.canScrollHorizontally,\n      canScrollVertically = _scrollContainerHandl.canScrollVertically,\n      bounds = scrollContainerHandle.current.getScrollBounds(),\n      focusedItem = _spotlight[\"default\"].getCurrent();\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n    if ((direction === 'vertical' && canScrollVertically(bounds) || direction === 'horizontal' && canScrollHorizontally(bounds)) && !props['data-spotlight-container-disabled']) {\n      themeScrollContentHandle.current.setContainerDisabled(true);\n    }\n  }\n  function handleMouseDown(ev) {\n    if (props['data-spotlight-container-disabled']) {\n      ev.preventDefault();\n    } else if (scrollMode === 'native') {\n      themeScrollContentHandle.current.setContainerDisabled(false);\n    }\n  }\n\n  // Return\n\n  return {\n    handleFlick: handleFlick,\n    handleMouseDown: handleMouseDown\n  };\n};\nexports.useEventMouse = useEventMouse;\nvar useEventTouch = function useEventTouch() {\n  // Functions\n\n  function handleTouchStart() {\n    var focusedItem = _spotlight[\"default\"].getCurrent();\n    if (!_spotlight[\"default\"].isPaused() && focusedItem) {\n      focusedItem.blur();\n    }\n  }\n\n  // Return\n\n  return {\n    handleTouchStart: handleTouchStart\n  };\n};\nexports.useEventTouch = useEventTouch;\nvar useEventVoice = function useEventVoice(props, instances) {\n  var scrollContainerRef = instances.scrollContainerRef,\n    scrollContainerHandle = instances.scrollContainerHandle;\n\n  // Mutable value\n\n  var mutableRef = (0, _react.useRef)({\n    isVoiceControl: false,\n    voiceControlDirection: 'vertical'\n  });\n\n  // Functions\n\n  var updateFocusAfterVoiceControl = function updateFocusAfterVoiceControl() {\n    var spotItem = _spotlight[\"default\"].getCurrent(),\n      scrollContainerNode = scrollContainerRef.current;\n    if (_utilDOM[\"default\"].containsDangerously(scrollContainerNode, spotItem)) {\n      var viewportBounds = scrollContainerNode.getBoundingClientRect(),\n        spotItemBounds = spotItem.getBoundingClientRect(),\n        nodes = _spotlight[\"default\"].getSpottableDescendants(scrollContainerNode.dataset.spotlightId),\n        first = mutableRef.current.voiceControlDirection === 'vertical' ? 'top' : 'left',\n        last = mutableRef.current.voiceControlDirection === 'vertical' ? 'bottom' : 'right';\n      if (spotItemBounds[last] < viewportBounds[first] || spotItemBounds[first] > viewportBounds[last]) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeBounds = nodes[i].getBoundingClientRect();\n          if (nodeBounds[first] > viewportBounds[first] && nodeBounds[last] < viewportBounds[last]) {\n            _spotlight[\"default\"].focus(nodes[i]);\n            break;\n          }\n        }\n      }\n    }\n  };\n  function stopVoice() {\n    if (mutableRef.current.isVoiceControl) {\n      mutableRef.current.isVoiceControl = false;\n      updateFocusAfterVoiceControl();\n    }\n  }\n  var isReachedEdge = function isReachedEdge(scrollPos, ltrBound, rtlBound) {\n    var isRtl = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var bound = isRtl ? rtlBound : ltrBound;\n    return bound === 0 && scrollPos === 0 || bound > 0 && scrollPos >= bound - 1;\n  };\n  var handleVoice = function handleVoice(e) {\n    var isHorizontal = props.direction === 'horizontal',\n      isRtl = scrollContainerHandle.current.rtl,\n      _scrollContainerHandl2 = scrollContainerHandle.current,\n      scrollTop = _scrollContainerHandl2.scrollTop,\n      scrollLeft = _scrollContainerHandl2.scrollLeft,\n      _scrollContainerHandl3 = scrollContainerHandle.current.getScrollBounds(),\n      maxLeft = _scrollContainerHandl3.maxLeft,\n      maxTop = _scrollContainerHandl3.maxTop,\n      verticalDirection = ['up', 'down', 'top', 'bottom'],\n      horizontalDirection = isRtl ? ['right', 'left', 'rightmost', 'leftmost'] : ['left', 'right', 'leftmost', 'rightmost'],\n      movement = ['previous', 'next', 'first', 'last'];\n    var scroll = e && e.detail && e.detail.scroll,\n      index = movement.indexOf(scroll);\n    if (index > -1) {\n      scroll = isHorizontal ? horizontalDirection[index] : verticalDirection[index];\n    }\n    mutableRef.current.voiceControlDirection = verticalDirection.includes(scroll) && 'vertical' || horizontalDirection.includes(scroll) && 'horizontal' || null;\n\n    // Case 1. Invalid direction\n    if (mutableRef.current.voiceControlDirection === null) {\n      mutableRef.current.isVoiceControl = false;\n      // Case 2. Cannot scroll\n    } else if (['up', 'top'].includes(scroll) && isReachedEdge(scrollTop, 0) || ['down', 'bottom'].includes(scroll) && isReachedEdge(scrollTop, maxTop) || ['left', 'leftmost'].includes(scroll) && isReachedEdge(scrollLeft, 0, maxLeft, isRtl) || ['right', 'rightmost'].includes(scroll) && isReachedEdge(scrollLeft, maxLeft, 0, isRtl)) {\n      if (window.webOSVoiceReportActionResult) {\n        window.webOSVoiceReportActionResult({\n          voiceUi: {\n            exception: 'alreadyCompleted'\n          }\n        });\n        e.preventDefault();\n      }\n      // Case 3. Can scroll\n    } else {\n      mutableRef.current.isVoiceControl = true;\n      if (['up', 'down', 'left', 'right'].includes(scroll)) {\n        var bounds = scrollContainerHandle.current.getScrollBounds(),\n          directionFactor = scroll === 'up' || scroll === 'left' && !isRtl || scroll === 'right' && isRtl,\n          scrollVertically = verticalDirection.includes(scroll),\n          direction = directionFactor ? -1 : 1,\n          pageDistance = direction * (scrollVertically ? bounds.clientHeight : bounds.clientWidth) * paginationPageMultiplier;\n        scrollContainerHandle.current.lastInputType = 'pageKey';\n        if (direction !== scrollContainerHandle.current.wheelDirection) {\n          scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n          scrollContainerHandle.current.wheelDirection = direction;\n        }\n        scrollContainerHandle.current.scrollToAccumulatedTarget(pageDistance, scrollVertically, props.overscrollEffectOn.pageKey);\n      } else {\n        // ['top', 'bottom', 'leftmost', 'rightmost'].includes(scroll)\n        scrollContainerHandle.current.scrollTo({\n          align: verticalDirection.includes(scroll) && scroll || (scroll === 'leftmost' && isRtl || scroll === 'rightmost' && !isRtl) && 'right' || 'left'\n        });\n      }\n      e.preventDefault();\n    }\n  };\n  function addVoiceEventListener(scrollContentRef) {\n    if (_platform[\"default\"].webos) {\n      (0, _utilEvent[\"default\"])('webOSVoice').addEventListener(scrollContentRef, handleVoice);\n      if (scrollContainerHandle && scrollContainerHandle.current && scrollContainerHandle.current.getScrollBounds) {\n        var bounds = scrollContainerHandle.current.getScrollBounds();\n        if (scrollContainerHandle.current.canScrollVertically(bounds) || scrollContainerHandle.current.canScrollHorizontally(bounds)) {\n          scrollContentRef.current.setAttribute('data-webos-voice-intent', 'Scroll');\n        }\n      }\n    }\n  }\n  function removeVoiceEventListener(scrollContentRef) {\n    if (_platform[\"default\"].webos) {\n      (0, _utilEvent[\"default\"])('webOSVoice').removeEventListener(scrollContentRef, handleVoice);\n      scrollContentRef.current.removeAttribute('data-webos-voice-intent');\n    }\n  }\n\n  // Return\n\n  return {\n    addVoiceEventListener: addVoiceEventListener,\n    removeVoiceEventListener: removeVoiceEventListener,\n    stopVoice: stopVoice\n  };\n};\nexports.useEventVoice = useEventVoice;\nvar useEventWheel = function useEventWheel(props, instances) {\n  var dataSize = props.dataSize,\n    scrollMode = props.scrollMode,\n    snapToCenter = props.snapToCenter;\n  var themeScrollContentHandle = instances.themeScrollContentHandle,\n    scrollContainerHandle = instances.scrollContainerHandle,\n    scrollContentHandle = instances.scrollContentHandle,\n    scrollContentRef = instances.scrollContentRef,\n    spottable = instances.spottable;\n\n  // Functions\n  function initializeWheeling() {\n    if (!props['data-spotlight-container-disabled']) {\n      themeScrollContentHandle.current.setContainerDisabled(true);\n    }\n    spottable.current.isWheeling = true;\n  }\n  function handleWheel(_ref2) {\n    var delta = _ref2.delta;\n    var focusedItem = _spotlight[\"default\"].getCurrent();\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n    if (delta !== 0) {\n      initializeWheeling();\n    }\n  }\n\n  /*\n   * wheel event handler;\n   * - for horizontal scroll, supports wheel action on any children nodes since web engine cannot support this\n   * - for vertical scroll, supports wheel action on scrollbars only\n   */\n  function handleWheelNative(ev) {\n    var overscrollEffectRequired = props.overscrollEffectOn.wheel;\n    var bounds = scrollContainerHandle.current.getScrollBounds();\n    var canScrollHorizontally = scrollContainerHandle.current.canScrollHorizontally(bounds);\n    var canScrollVertically = scrollContainerHandle.current.canScrollVertically(bounds);\n    var eventDeltaMode = ev.deltaMode;\n    var eventDelta = -ev.wheelDeltaY || ev.deltaY;\n    var positiveDelta = eventDelta > 0;\n    var negativeDelta = eventDelta < 0;\n    var _scrollContainerHandl4 = scrollContainerHandle.current,\n      scrollTop = _scrollContainerHandl4.scrollTop,\n      scrollLeft = _scrollContainerHandl4.scrollLeft;\n    var offset = snapToCenter ? scrollContentHandle.current.primary.gridSize : 0;\n    var delta = 0;\n    var needToHideScrollbarTrack = false;\n    if (typeof window !== 'undefined') {\n      window.document.activeElement.blur();\n    }\n    scrollContainerHandle.current.showScrollbarTrack(bounds);\n\n    // FIXME This routine is a temporary support for horizontal wheel scroll.\n    // FIXME If web engine supports horizontal wheel, this routine should be refined or removed.\n    if (canScrollVertically) {\n      // This routine handles wheel events on scrollbars for vertical scroll.\n      if (negativeDelta && scrollTop > 0 + offset || positiveDelta && scrollTop < bounds.maxTop - offset) {\n        if (!spottable.current.isWheeling) {\n          initializeWheeling();\n        }\n\n        // If ev.target is a descendant of scrollContent, the event will be handled on scroll event handler.\n        if (!_utilDOM[\"default\"].containsDangerously(scrollContentRef.current, ev.target) || snapToCenter) {\n          delta = scrollContainerHandle.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientHeight * scrollWheelPageMultiplierForMaxPixel);\n          needToHideScrollbarTrack = !delta;\n          ev.preventDefault();\n        } else if (overscrollEffectRequired) {\n          scrollContainerHandle.current.checkAndApplyOverscrollEffect('vertical', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n        ev.stopPropagation();\n      } else {\n        if (overscrollEffectRequired && (negativeDelta && scrollTop <= 0 || positiveDelta && scrollTop >= bounds.maxTop)) {\n          scrollContainerHandle.current.applyOverscrollEffect('vertical', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n        needToHideScrollbarTrack = true;\n      }\n    } else if (canScrollHorizontally) {\n      // this routine handles wheel events on any children for horizontal scroll.\n      if (negativeDelta && scrollLeft > 0 + offset || positiveDelta && scrollLeft < bounds.maxLeft - offset) {\n        if (!spottable.current.isWheeling) {\n          initializeWheeling();\n        }\n        delta = scrollContainerHandle.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientWidth * scrollWheelPageMultiplierForMaxPixel);\n        needToHideScrollbarTrack = !delta;\n        ev.preventDefault();\n        ev.stopPropagation();\n      } else {\n        if (overscrollEffectRequired && (negativeDelta && scrollLeft <= 0 || positiveDelta && scrollLeft >= bounds.maxLeft)) {\n          scrollContainerHandle.current.applyOverscrollEffect('horizontal', positiveDelta ? 'after' : 'before', overscrollTypeOnce);\n        }\n        needToHideScrollbarTrack = true;\n      }\n    }\n    if (delta !== 0) {\n      /* prevent native scrolling feature for vertical direction */\n      ev.preventDefault();\n      var direction = Math.sign(delta);\n\n      // Not to accumulate scroll position if wheel direction is different from hold direction\n      if (direction !== scrollContainerHandle.current.wheelDirection) {\n        scrollContainerHandle.current.isScrollAnimationTargetAccumulated = false;\n        scrollContainerHandle.current.wheelDirection = direction;\n      }\n      if (!snapToCenter) {\n        scrollContainerHandle.current.scrollToAccumulatedTarget(delta, canScrollVertically, overscrollEffectRequired);\n      } else {\n        var dimensionToExtent = scrollContentHandle.current.dimensionToExtent;\n        var currentIndex = scrollContentHandle.current.getCenterItemIndexFromScrollPosition(canScrollVertically ? scrollTop : scrollLeft);\n        var nextIndex = currentIndex + direction * dimensionToExtent;\n        if (nextIndex > 0 && nextIndex < dataSize - 1) {\n          if (typeof document === 'object') {\n            var target = scrollContentRef.current.querySelector(\"[data-index=\\\"\".concat(nextIndex, \"\\\"] > div\"));\n\n            // remove effect\n            themeScrollContentHandle.current.removeScaleEffect();\n            // add effect\n            themeScrollContentHandle.current.addScaleEffect(target);\n          }\n          if (themeScrollContentHandle.current.resetSnapToCenterStatus) {\n            themeScrollContentHandle.current.resetSnapToCenterStatus();\n          }\n          scrollContainerHandle.current.scrollTo({\n            index: nextIndex,\n            stickTo: 'center'\n          });\n        }\n      }\n    }\n    if (needToHideScrollbarTrack) {\n      scrollContainerHandle.current.startHidingScrollbarTrack();\n    }\n  }\n\n  // Return\n\n  return {\n    handleWheel: scrollMode === 'translate' ? handleWheel : handleWheelNative\n  };\n};\nexports.useEventWheel = useEventWheel;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}